<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AVRLibs: SPI Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AVRLibs
   </div>
   <div id="projectbrief">AVR8MCUlibraries.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classSPI.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classSPI-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">SPI Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> bus general implementation.  
 <a href="classSPI.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="spi_8h_source.html">spi.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI_1_1Device.html">Device</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> device class. Use this class to simplify the <a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> device creation and configuration.  <a href="classSPI_1_1Device.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a31d12b228353993e370ed135245f2191"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#a31d12b228353993e370ed135245f2191">disable</a> (void)</td></tr>
<tr class="memdesc:a31d12b228353993e370ed135245f2191"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable the <a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> bus.  <a href="#a31d12b228353993e370ed135245f2191">More...</a><br /></td></tr>
<tr class="separator:a31d12b228353993e370ed135245f2191"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f2cb0e552d0a9d24451e5fa28dc1fc2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#a7f2cb0e552d0a9d24451e5fa28dc1fc2">enable</a> (void)</td></tr>
<tr class="memdesc:a7f2cb0e552d0a9d24451e5fa28dc1fc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the MOSI, MISO, SCLK and SS pins for master operation.  <a href="#a7f2cb0e552d0a9d24451e5fa28dc1fc2">More...</a><br /></td></tr>
<tr class="separator:a7f2cb0e552d0a9d24451e5fa28dc1fc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e320ac29f052e2eef1d563b5a26ca9e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#a0e320ac29f052e2eef1d563b5a26ca9e">start</a> (<a class="el" href="spi__defs_8h.html#structspi__conf__t">spi_conf_t</a> *conf)</td></tr>
<tr class="memdesc:a0e320ac29f052e2eef1d563b5a26ca9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the <a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> bus as master with the given configuration.  <a href="#a0e320ac29f052e2eef1d563b5a26ca9e">More...</a><br /></td></tr>
<tr class="separator:a0e320ac29f052e2eef1d563b5a26ca9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7a2b7cd743b1afb350352ea9c016244"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#ad7a2b7cd743b1afb350352ea9c016244">get_config</a> (<a class="el" href="spi__defs_8h.html#structspi__conf__t">spi_conf_t</a> *conf)</td></tr>
<tr class="memdesc:ad7a2b7cd743b1afb350352ea9c016244"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the master configuration struct with the default values: F_CPU/4[Hz], SPI_MODE_0, MSB_FIRST.  <a href="#ad7a2b7cd743b1afb350352ea9c016244">More...</a><br /></td></tr>
<tr class="separator:ad7a2b7cd743b1afb350352ea9c016244"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fe20cc29d639e4a38bb9b50b78aa0f3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#a7fe20cc29d639e4a38bb9b50b78aa0f3">get_config</a> (<a class="el" href="spi__defs_8h.html#structspi__conf__t">spi_conf_t</a> *conf, uint32_t freq, <a class="el" href="spi__defs_8h.html#a6a811e2cb7c515e1f80c0864eb963ce0">spi_tx_mode_t</a> tx_mode, <a class="el" href="spi__defs_8h.html#abc9694da8207cd746e9c9e55cc6b9fef">spi_ds_mode_t</a> bit_order)</td></tr>
<tr class="memdesc:a7fe20cc29d639e4a38bb9b50b78aa0f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the <a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> configuration.  <a href="#a7fe20cc29d639e4a38bb9b50b78aa0f3">More...</a><br /></td></tr>
<tr class="separator:a7fe20cc29d639e4a38bb9b50b78aa0f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dd51237a0b5544ffb240cf00342f3aa"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#a0dd51237a0b5544ffb240cf00342f3aa">transfer</a> (uint8_t data)</td></tr>
<tr class="memdesc:a0dd51237a0b5544ffb240cf00342f3aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">The master send a single byte to the slave and returns it's response.  <a href="#a0dd51237a0b5544ffb240cf00342f3aa">More...</a><br /></td></tr>
<tr class="separator:a0dd51237a0b5544ffb240cf00342f3aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8223ba4709f81d8124d2b67bf2e351b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#ab8223ba4709f81d8124d2b67bf2e351b">transfer</a> (uint8_t *src, uint8_t *rec, size_t size, uint8_t off=0, uint16_t dly=0)</td></tr>
<tr class="memdesc:ab8223ba4709f81d8124d2b67bf2e351b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform a data transfer between the <a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> master and the slave. Send "size" bytes from "src" and save the responses on "rec". The method allow to start saving the responses after "offset" bytes sent (the master will send "offset" dummy bytes after "src" is transmitted to get the full response) and add delay after each transfer.  <a href="#ab8223ba4709f81d8124d2b67bf2e351b">More...</a><br /></td></tr>
<tr class="separator:ab8223ba4709f81d8124d2b67bf2e351b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a875e2d2f853e068acd1721b49a5cdd13"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#a875e2d2f853e068acd1721b49a5cdd13">write</a> (uint8_t src, uint16_t dly=0)</td></tr>
<tr class="memdesc:a875e2d2f853e068acd1721b49a5cdd13"><td class="mdescLeft">&#160;</td><td class="mdescRight">write(uint8_t*, uint8_t, uint16_t) handler for 1 byte "src".  <a href="#a875e2d2f853e068acd1721b49a5cdd13">More...</a><br /></td></tr>
<tr class="separator:a875e2d2f853e068acd1721b49a5cdd13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a856d019b14d9028bf8d0255de60df42e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#a856d019b14d9028bf8d0255de60df42e">write</a> (uint8_t *src, size_t size, uint16_t dly=0)</td></tr>
<tr class="memdesc:a856d019b14d9028bf8d0255de60df42e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write "size" bytes from "src" to the slave.  <a href="#a856d019b14d9028bf8d0255de60df42e">More...</a><br /></td></tr>
<tr class="separator:a856d019b14d9028bf8d0255de60df42e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e86b55d372c2d49b20a62bde146ee19"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#a5e86b55d372c2d49b20a62bde146ee19">write_reg</a> (uint8_t reg, uint8_t src, uint16_t dly)</td></tr>
<tr class="separator:a5e86b55d372c2d49b20a62bde146ee19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac85db23327ba7eccd0eb610cc49384b6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#ac85db23327ba7eccd0eb610cc49384b6">write_reg</a> (uint8_t reg, uint8_t *src, size_t size, uint16_t dly)</td></tr>
<tr class="memdesc:ac85db23327ba7eccd0eb610cc49384b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler of spi_master_write() to simplify the process of write data into a given register on the slave device. It writes "size" bytes from "src" to the "reg" register on the slave.  <a href="#ac85db23327ba7eccd0eb610cc49384b6">More...</a><br /></td></tr>
<tr class="separator:ac85db23327ba7eccd0eb610cc49384b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0f9081b47949595eec8fee5365b5d7f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#ac0f9081b47949595eec8fee5365b5d7f">read</a> (uint8_t *rec, size_t size, uint16_t dly=0)</td></tr>
<tr class="memdesc:ac0f9081b47949595eec8fee5365b5d7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read "size" bytes from the slave to "rec".  <a href="#ac0f9081b47949595eec8fee5365b5d7f">More...</a><br /></td></tr>
<tr class="separator:ac0f9081b47949595eec8fee5365b5d7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad774c962966d3aa3641079490c40011e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#ad774c962966d3aa3641079490c40011e">read_reg</a> (uint8_t reg, uint8_t *rec, uint16_t dly)</td></tr>
<tr class="separator:ad774c962966d3aa3641079490c40011e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af555dade1560b577640764ad78567e56"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#af555dade1560b577640764ad78567e56">read_reg</a> (uint8_t reg, uint8_t *rec, size_t size, uint16_t dly)</td></tr>
<tr class="memdesc:af555dade1560b577640764ad78567e56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler of spi_master_read() to simplify the process of read data from a given register on the slave device. It reads "size" bytes from the "reg" register on the slave and copy them to "rec".  <a href="#af555dade1560b577640764ad78567e56">More...</a><br /></td></tr>
<tr class="separator:af555dade1560b577640764ad78567e56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8ffe985040078a4f67e8cebafa67744"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#aa8ffe985040078a4f67e8cebafa67744">enable</a> (pins_t ss_int, <a class="el" href="base_8h.html#a4ae663b5bf737f82fa2c1d5d2a359a8b">fun_ptr_vd_vd</a> fun=NULL)</td></tr>
<tr class="memdesc:aa8ffe985040078a4f67e8cebafa67744"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare the MOSI, MISO, SCLK and SS pins for slave operation and start the slave routine. The SS pin of the board has to be connected to a pin with external or pin-change interrupt capabilities (used to control the <a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> flow). It's possible to set a user-defined function that executes before the slave interruption is handled (if required).  <a href="#aa8ffe985040078a4f67e8cebafa67744">More...</a><br /></td></tr>
<tr class="separator:aa8ffe985040078a4f67e8cebafa67744"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20e3f8b9050dfb22733fd18a7625f6b6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#a20e3f8b9050dfb22733fd18a7625f6b6">on_receive</a> (<a class="el" href="base_8h.html#a725043bfa4ceb912d193c003ceffb1b6">fun_ptr_u8_u8</a> fun)</td></tr>
<tr class="memdesc:a20e3f8b9050dfb22733fd18a7625f6b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a user-defined function to handle the data received from the master. The input of the function is the byte received and the output is the response generated. By default the slave will send 0x00 for every byte received.  <a href="#a20e3f8b9050dfb22733fd18a7625f6b6">More...</a><br /></td></tr>
<tr class="separator:a20e3f8b9050dfb22733fd18a7625f6b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a495c945a1477629490fcdd6971553007"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classSPI.html">SPI</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#a495c945a1477629490fcdd6971553007">get_instance</a> (void)</td></tr>
<tr class="memdesc:a495c945a1477629490fcdd6971553007"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get this class instance.  <a href="#a495c945a1477629490fcdd6971553007">More...</a><br /></td></tr>
<tr class="separator:a495c945a1477629490fcdd6971553007"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47da0816c6535448ef2d900c8df0f6f4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#a47da0816c6535448ef2d900c8df0f6f4">delete_instance</a> (void)</td></tr>
<tr class="memdesc:a47da0816c6535448ef2d900c8df0f6f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes the actual instance. This action turns off the interface and reset its configurations.  <a href="#a47da0816c6535448ef2d900c8df0f6f4">More...</a><br /></td></tr>
<tr class="separator:a47da0816c6535448ef2d900c8df0f6f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:af05eaef265f31ddf0fddf5189112fa16"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16">spi_mode_t</a> { <a class="el" href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16aa466dd54566599e63d053e301023e782">SPI_NONE</a>, 
<a class="el" href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16a7b1f36343242c16f11c88f9343b3f594">SPI_MASTER</a>, 
<a class="el" href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16ad3b5a1dde16148dc9bd5337dd96cbe7a">SPI_SLAVE</a>
 }<tr class="memdesc:af05eaef265f31ddf0fddf5189112fa16"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> modes.  <a href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:af05eaef265f31ddf0fddf5189112fa16"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ac415bd759023759f0a5722fb838677c3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#ac415bd759023759f0a5722fb838677c3">SPI</a> (void)</td></tr>
<tr class="memdesc:ac415bd759023759f0a5722fb838677c3"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> constructor.  <a href="#ac415bd759023759f0a5722fb838677c3">More...</a><br /></td></tr>
<tr class="separator:ac415bd759023759f0a5722fb838677c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1596e3384f6094e9f469e792f8609cc7"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#a1596e3384f6094e9f469e792f8609cc7">get_prescaler</a> (uint32_t freq)</td></tr>
<tr class="memdesc:a1596e3384f6094e9f469e792f8609cc7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the most adequate prescaler depending on the selected frequency.  <a href="#a1596e3384f6094e9f469e792f8609cc7">More...</a><br /></td></tr>
<tr class="separator:a1596e3384f6094e9f469e792f8609cc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a48cc6825318bed86872e3deb56777f65"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#a48cc6825318bed86872e3deb56777f65">on_receive_callback</a> (uint8_t m_data)</td></tr>
<tr class="memdesc:a48cc6825318bed86872e3deb56777f65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal slave on receive ISR callback.  <a href="#a48cc6825318bed86872e3deb56777f65">More...</a><br /></td></tr>
<tr class="separator:a48cc6825318bed86872e3deb56777f65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb642081c8fb09b6bfe4ffff3fcb53f5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#aeb642081c8fb09b6bfe4ffff3fcb53f5">on_request_callback</a> (void)</td></tr>
<tr class="memdesc:aeb642081c8fb09b6bfe4ffff3fcb53f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal slave on request ISR callback.  <a href="#aeb642081c8fb09b6bfe4ffff3fcb53f5">More...</a><br /></td></tr>
<tr class="separator:aeb642081c8fb09b6bfe4ffff3fcb53f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a1ad111bb98a9e3c6190eb550a9318e68"><td class="memItemLeft" align="right" valign="top">volatile <a class="el" href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16">spi_mode_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#a1ad111bb98a9e3c6190eb550a9318e68">_mode</a></td></tr>
<tr class="memdesc:a1ad111bb98a9e3c6190eb550a9318e68"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> mode.  <a href="#a1ad111bb98a9e3c6190eb550a9318e68">More...</a><br /></td></tr>
<tr class="separator:a1ad111bb98a9e3c6190eb550a9318e68"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:aa71ccc78ec61fa8aa8312d3ad01263b9"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classSPI.html">SPI</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#aa71ccc78ec61fa8aa8312d3ad01263b9">_inst</a> = NULL</td></tr>
<tr class="memdesc:aa71ccc78ec61fa8aa8312d3ad01263b9"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classSPI_1_1Device.html" title="SPI device class. Use this class to simplify the SPI device creation and configuration. ">Device</a> Singleton.  <a href="#aa71ccc78ec61fa8aa8312d3ad01263b9">More...</a><br /></td></tr>
<tr class="separator:aa71ccc78ec61fa8aa8312d3ad01263b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56eed322c603b399c2781efc7b639166"><td class="memItemLeft" align="right" valign="top">static pins_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#a56eed322c603b399c2781efc7b639166">_ss_pin</a></td></tr>
<tr class="memdesc:a56eed322c603b399c2781efc7b639166"><td class="mdescLeft">&#160;</td><td class="mdescRight">Slave SS interrupt pin.  <a href="#a56eed322c603b399c2781efc7b639166">More...</a><br /></td></tr>
<tr class="separator:a56eed322c603b399c2781efc7b639166"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f93dbfa5da95cea67f1c447fa65a5ed"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#a6f93dbfa5da95cea67f1c447fa65a5ed">_slave_active</a></td></tr>
<tr class="memdesc:a6f93dbfa5da95cea67f1c447fa65a5ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Slave on-request flag.  <a href="#a6f93dbfa5da95cea67f1c447fa65a5ed">More...</a><br /></td></tr>
<tr class="separator:a6f93dbfa5da95cea67f1c447fa65a5ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e448dfcc7ab4bc71100081fbfaf0f69"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="base_8h.html#a725043bfa4ceb912d193c003ceffb1b6">fun_ptr_u8_u8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#a9e448dfcc7ab4bc71100081fbfaf0f69">_user_on_receive</a></td></tr>
<tr class="memdesc:a9e448dfcc7ab4bc71100081fbfaf0f69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Slave on receive ISR callback.  <a href="#a9e448dfcc7ab4bc71100081fbfaf0f69">More...</a><br /></td></tr>
<tr class="separator:a9e448dfcc7ab4bc71100081fbfaf0f69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4891269624036ec8bdf7c28cc25246b7"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="base_8h.html#a4ae663b5bf737f82fa2c1d5d2a359a8b">fun_ptr_vd_vd</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#a4891269624036ec8bdf7c28cc25246b7">_user_on_request</a></td></tr>
<tr class="memdesc:a4891269624036ec8bdf7c28cc25246b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Slave on request ISR callback.  <a href="#a4891269624036ec8bdf7c28cc25246b7">More...</a><br /></td></tr>
<tr class="separator:a4891269624036ec8bdf7c28cc25246b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a96543550133e0b0c6ae83faad5c0d68d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI.html#a96543550133e0b0c6ae83faad5c0d68d">SPI_STC_vect</a> ()</td></tr>
<tr class="memdesc:a96543550133e0b0c6ae83faad5c0d68d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to make available private <a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> methods on the ISR.  <a href="#a96543550133e0b0c6ae83faad5c0d68d">More...</a><br /></td></tr>
<tr class="separator:a96543550133e0b0c6ae83faad5c0d68d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> bus general implementation. </p>

<p class="definition">Definition at line <a class="el" href="spi_8h_source.html#l00019">19</a> of file <a class="el" href="spi_8h_source.html">spi.h</a>.</p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="af05eaef265f31ddf0fddf5189112fa16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af05eaef265f31ddf0fddf5189112fa16">&#9670;&nbsp;</a></span>spi_mode_t</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16">SPI::spi_mode_t</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> modes. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="af05eaef265f31ddf0fddf5189112fa16aa466dd54566599e63d053e301023e782"></a>SPI_NONE&#160;</td><td class="fielddoc"><p><a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> not configured. </p>
</td></tr>
<tr><td class="fieldname"><a id="af05eaef265f31ddf0fddf5189112fa16a7b1f36343242c16f11c88f9343b3f594"></a>SPI_MASTER&#160;</td><td class="fielddoc"><p><a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> master mode. </p>
</td></tr>
<tr><td class="fieldname"><a id="af05eaef265f31ddf0fddf5189112fa16ad3b5a1dde16148dc9bd5337dd96cbe7a"></a>SPI_SLAVE&#160;</td><td class="fielddoc"><p><a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> slave mode. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="spi_8h_source.html#l00263">263</a> of file <a class="el" href="spi_8h_source.html">spi.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                 {</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <a class="code" href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16aa466dd54566599e63d053e301023e782">SPI_NONE</a>,                               </div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <a class="code" href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16a7b1f36343242c16f11c88f9343b3f594">SPI_MASTER</a>,                             </div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <a class="code" href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16ad3b5a1dde16148dc9bd5337dd96cbe7a">SPI_SLAVE</a>                               </div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    } <a class="code" href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16">spi_mode_t</a>;</div><div class="ttc" id="classSPI_html_af05eaef265f31ddf0fddf5189112fa16ad3b5a1dde16148dc9bd5337dd96cbe7a"><div class="ttname"><a href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16ad3b5a1dde16148dc9bd5337dd96cbe7a">SPI::SPI_SLAVE</a></div><div class="ttdoc">SPI slave mode. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00266">spi.h:266</a></div></div>
<div class="ttc" id="classSPI_html_af05eaef265f31ddf0fddf5189112fa16a7b1f36343242c16f11c88f9343b3f594"><div class="ttname"><a href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16a7b1f36343242c16f11c88f9343b3f594">SPI::SPI_MASTER</a></div><div class="ttdoc">SPI master mode. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00265">spi.h:265</a></div></div>
<div class="ttc" id="classSPI_html_af05eaef265f31ddf0fddf5189112fa16aa466dd54566599e63d053e301023e782"><div class="ttname"><a href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16aa466dd54566599e63d053e301023e782">SPI::SPI_NONE</a></div><div class="ttdoc">SPI not configured. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00264">spi.h:264</a></div></div>
<div class="ttc" id="classSPI_html_af05eaef265f31ddf0fddf5189112fa16"><div class="ttname"><a href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16">SPI::spi_mode_t</a></div><div class="ttdeci">spi_mode_t</div><div class="ttdoc">SPI modes. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00263">spi.h:263</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ac415bd759023759f0a5722fb838677c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac415bd759023759f0a5722fb838677c3">&#9670;&nbsp;</a></span>SPI()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">SPI::SPI </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> constructor. </p>

<p class="definition">Definition at line <a class="el" href="spi_8cpp_source.html#l00287">287</a> of file <a class="el" href="spi_8cpp_source.html">spi.cpp</a>.</p>

<p class="reference">References <a class="el" href="spi_8h_source.html#l00272">_slave_active</a>, <a class="el" href="spi_8h_source.html#l00271">_ss_pin</a>, <a class="el" href="spi_8h_source.html#l00273">_user_on_receive</a>, <a class="el" href="spi_8h_source.html#l00274">_user_on_request</a>, <a class="el" href="callbacks_8cpp_source.html#l00016">fun_u8_u8_dummy()</a>, <a class="el" href="callbacks_8cpp_source.html#l00008">fun_vd_vd_dummy()</a>, and <a class="el" href="timing_8cpp_source.html#l00040">timing_enable()</a>.</p>

<p class="reference">Referenced by <a class="el" href="spi_8cpp_source.html#l00017">get_instance()</a>.</p>
<div class="fragment"><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;             {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="comment">// Start the SPI configuration</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <a class="code" href="classSPI.html#a56eed322c603b399c2781efc7b639166">_ss_pin</a> = NO_PIN;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <a class="code" href="classSPI.html#a6f93dbfa5da95cea67f1c447fa65a5ed">_slave_active</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <a class="code" href="classSPI.html#a9e448dfcc7ab4bc71100081fbfaf0f69">_user_on_receive</a> = <a class="code" href="base_8h.html#a0eecf71a28a1694c948cce671c54d018">fun_u8_u8_dummy</a>;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <a class="code" href="classSPI.html#a4891269624036ec8bdf7c28cc25246b7">_user_on_request</a> = <a class="code" href="base_8h.html#a2ba2f8e171d4e71827844d9537cf7fa6">fun_vd_vd_dummy</a>;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="comment">// Start the timing functions</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <a class="code" href="timing_8cpp.html#a95c71997a1eeb9a6e4d92a74a22642e3">timing_enable</a>();</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;}</div><div class="ttc" id="base_8h_html_a2ba2f8e171d4e71827844d9537cf7fa6"><div class="ttname"><a href="base_8h.html#a2ba2f8e171d4e71827844d9537cf7fa6">fun_vd_vd_dummy</a></div><div class="ttdeci">void fun_vd_vd_dummy(void)</div><div class="ttdoc">Dummy function, does nothing. Used to initialize fun_ptr_vd_vd pointers. </div><div class="ttdef"><b>Definition:</b> <a href="callbacks_8cpp_source.html#l00008">callbacks.cpp:8</a></div></div>
<div class="ttc" id="timing_8cpp_html_a95c71997a1eeb9a6e4d92a74a22642e3"><div class="ttname"><a href="timing_8cpp.html#a95c71997a1eeb9a6e4d92a74a22642e3">timing_enable</a></div><div class="ttdeci">void timing_enable(void)</div><div class="ttdoc">Initializes the timing functions. </div><div class="ttdef"><b>Definition:</b> <a href="timing_8cpp_source.html#l00040">timing.cpp:40</a></div></div>
<div class="ttc" id="classSPI_html_a9e448dfcc7ab4bc71100081fbfaf0f69"><div class="ttname"><a href="classSPI.html#a9e448dfcc7ab4bc71100081fbfaf0f69">SPI::_user_on_receive</a></div><div class="ttdeci">static fun_ptr_u8_u8 _user_on_receive</div><div class="ttdoc">Slave on receive ISR callback. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00273">spi.h:273</a></div></div>
<div class="ttc" id="base_8h_html_a0eecf71a28a1694c948cce671c54d018"><div class="ttname"><a href="base_8h.html#a0eecf71a28a1694c948cce671c54d018">fun_u8_u8_dummy</a></div><div class="ttdeci">uint8_t fun_u8_u8_dummy(uint8_t value)</div><div class="ttdoc">Dummy function, does nothing. Used to initialize fun_ptr_u8_u8 pointers. </div><div class="ttdef"><b>Definition:</b> <a href="callbacks_8cpp_source.html#l00016">callbacks.cpp:16</a></div></div>
<div class="ttc" id="classSPI_html_a56eed322c603b399c2781efc7b639166"><div class="ttname"><a href="classSPI.html#a56eed322c603b399c2781efc7b639166">SPI::_ss_pin</a></div><div class="ttdeci">static pins_t _ss_pin</div><div class="ttdoc">Slave SS interrupt pin. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00271">spi.h:271</a></div></div>
<div class="ttc" id="classSPI_html_a4891269624036ec8bdf7c28cc25246b7"><div class="ttname"><a href="classSPI.html#a4891269624036ec8bdf7c28cc25246b7">SPI::_user_on_request</a></div><div class="ttdeci">static fun_ptr_vd_vd _user_on_request</div><div class="ttdoc">Slave on request ISR callback. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00274">spi.h:274</a></div></div>
<div class="ttc" id="classSPI_html_a6f93dbfa5da95cea67f1c447fa65a5ed"><div class="ttname"><a href="classSPI.html#a6f93dbfa5da95cea67f1c447fa65a5ed">SPI::_slave_active</a></div><div class="ttdeci">static bool _slave_active</div><div class="ttdoc">Slave on-request flag. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00272">spi.h:272</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a495c945a1477629490fcdd6971553007"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a495c945a1477629490fcdd6971553007">&#9670;&nbsp;</a></span>get_instance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSPI.html">SPI</a> * SPI::get_instance </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get this class instance. </p>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="classSPI_1_1Device.html" title="SPI device class. Use this class to simplify the SPI device creation and configuration. ">Device</a> singleton. </dd></dl>

<p class="definition">Definition at line <a class="el" href="spi_8cpp_source.html#l00017">17</a> of file <a class="el" href="spi_8cpp_source.html">spi.cpp</a>.</p>

<p class="reference">References <a class="el" href="spi_8h_source.html#l00255">_inst</a>, and <a class="el" href="spi_8cpp_source.html#l00287">SPI()</a>.</p>
<div class="fragment"><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;                           {</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classSPI.html#aa71ccc78ec61fa8aa8312d3ad01263b9">_inst</a>) <a class="code" href="classSPI.html#aa71ccc78ec61fa8aa8312d3ad01263b9">_inst</a> = <span class="keyword">new</span> <a class="code" href="classSPI.html#ac415bd759023759f0a5722fb838677c3">SPI</a>();</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classSPI.html#aa71ccc78ec61fa8aa8312d3ad01263b9">_inst</a>;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;}</div><div class="ttc" id="classSPI_html_ac415bd759023759f0a5722fb838677c3"><div class="ttname"><a href="classSPI.html#ac415bd759023759f0a5722fb838677c3">SPI::SPI</a></div><div class="ttdeci">SPI(void)</div><div class="ttdoc">SPI constructor. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8cpp_source.html#l00287">spi.cpp:287</a></div></div>
<div class="ttc" id="classSPI_html_aa71ccc78ec61fa8aa8312d3ad01263b9"><div class="ttname"><a href="classSPI.html#aa71ccc78ec61fa8aa8312d3ad01263b9">SPI::_inst</a></div><div class="ttdeci">static SPI * _inst</div><div class="ttdoc">Device Singleton. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00255">spi.h:255</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a47da0816c6535448ef2d900c8df0f6f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47da0816c6535448ef2d900c8df0f6f4">&#9670;&nbsp;</a></span>delete_instance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SPI::delete_instance </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Deletes the actual instance. This action turns off the interface and reset its configurations. </p>

<p class="definition">Definition at line <a class="el" href="spi_8cpp_source.html#l00022">22</a> of file <a class="el" href="spi_8cpp_source.html">spi.cpp</a>.</p>

<p class="reference">References <a class="el" href="spi_8h_source.html#l00255">_inst</a>, and <a class="el" href="spi_8cpp_source.html#l00030">disable()</a>.</p>
<div class="fragment"><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;                              {</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classSPI.html#aa71ccc78ec61fa8aa8312d3ad01263b9">_inst</a>) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <a class="code" href="classSPI.html#aa71ccc78ec61fa8aa8312d3ad01263b9">_inst</a>-&gt;<a class="code" href="classSPI.html#a31d12b228353993e370ed135245f2191">disable</a>();</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    <span class="keyword">delete</span> <a class="code" href="classSPI.html#aa71ccc78ec61fa8aa8312d3ad01263b9">_inst</a>;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    <a class="code" href="classSPI.html#aa71ccc78ec61fa8aa8312d3ad01263b9">_inst</a> = NULL;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;}</div><div class="ttc" id="classSPI_html_a31d12b228353993e370ed135245f2191"><div class="ttname"><a href="classSPI.html#a31d12b228353993e370ed135245f2191">SPI::disable</a></div><div class="ttdeci">void disable(void)</div><div class="ttdoc">Disable the SPI bus. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8cpp_source.html#l00030">spi.cpp:30</a></div></div>
<div class="ttc" id="classSPI_html_aa71ccc78ec61fa8aa8312d3ad01263b9"><div class="ttname"><a href="classSPI.html#aa71ccc78ec61fa8aa8312d3ad01263b9">SPI::_inst</a></div><div class="ttdeci">static SPI * _inst</div><div class="ttdoc">Device Singleton. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00255">spi.h:255</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a31d12b228353993e370ed135245f2191"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31d12b228353993e370ed135245f2191">&#9670;&nbsp;</a></span>disable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SPI::disable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable the <a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> bus. </p>

<p class="definition">Definition at line <a class="el" href="spi_8cpp_source.html#l00030">30</a> of file <a class="el" href="spi_8cpp_source.html">spi.cpp</a>.</p>

<p class="reference">References <a class="el" href="base_8h_source.html#l00022">_BV</a>, and <a class="el" href="atomic_8h_source.html#l00019">ATOMIC</a>.</p>

<p class="reference">Referenced by <a class="el" href="spi_8cpp_source.html#l00022">delete_instance()</a>.</p>
<div class="fragment"><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;                      {</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="comment">// Disable SPI (and the interrupts)</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <a class="code" href="atomic_8h.html#a1222129ee14a35c47bfe00baf377d8aa">ATOMIC</a>({</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        SPCR &amp;= ~(<a class="code" href="base_8h.html#a483c9de27db573099572f5485ef841c9">_BV</a>(SPIE) | <a class="code" href="base_8h.html#a483c9de27db573099572f5485ef841c9">_BV</a>(SPE));</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    });</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;}</div><div class="ttc" id="base_8h_html_a483c9de27db573099572f5485ef841c9"><div class="ttname"><a href="base_8h.html#a483c9de27db573099572f5485ef841c9">_BV</a></div><div class="ttdeci">#define _BV(x)</div><div class="ttdef"><b>Definition:</b> <a href="base_8h_source.html#l00022">base.h:22</a></div></div>
<div class="ttc" id="atomic_8h_html_a1222129ee14a35c47bfe00baf377d8aa"><div class="ttname"><a href="atomic_8h.html#a1222129ee14a35c47bfe00baf377d8aa">ATOMIC</a></div><div class="ttdeci">#define ATOMIC(code)</div><div class="ttdef"><b>Definition:</b> <a href="atomic_8h_source.html#l00019">atomic.h:19</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7f2cb0e552d0a9d24451e5fa28dc1fc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f2cb0e552d0a9d24451e5fa28dc1fc2">&#9670;&nbsp;</a></span>enable() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SPI::enable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure the MOSI, MISO, SCLK and SS pins for master operation. </p>

<p class="definition">Definition at line <a class="el" href="spi_8cpp_source.html#l00038">38</a> of file <a class="el" href="spi_8cpp_source.html">spi.cpp</a>.</p>

<p class="reference">References <a class="el" href="spi_8h_source.html#l00270">_mode</a>, <a class="el" href="gpio_8h_source.html#l00060">INPUT</a>, <a class="el" href="gpio_8h_source.html#l00061">OUTPUT</a>, <a class="el" href="gpio_8h_source.html#l00091">pin_mode()</a>, <a class="el" href="gpio_8h_source.html#l00111">pin_write()</a>, and <a class="el" href="spi_8h_source.html#l00265">SPI_MASTER</a>.</p>
<div class="fragment"><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                     {</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="comment">// Set SPI mode</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <a class="code" href="classSPI.html#a1ad111bb98a9e3c6190eb550a9318e68">_mode</a> = <a class="code" href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16a7b1f36343242c16f11c88f9343b3f594">SPI_MASTER</a>;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="comment">// Set SS as master</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <a class="code" href="gpio_8h.html#a3d3d10f2a2e5b693dd48f8f626c6e3a5">pin_mode</a>(SS, <a class="code" href="gpio_8h.html#a491a2cbfb4e94f2afcc0d5bdef2dc454a2ab08d3e103968f5f4f26b66a52e99d6">OUTPUT</a>);</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <a class="code" href="gpio_8h.html#aa69721b2fc6149a3f33cf1d41034196f">pin_write</a>(SS, <span class="keyword">true</span>);</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="comment">// Set SCK, MOSI and MISO</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <a class="code" href="gpio_8h.html#a3d3d10f2a2e5b693dd48f8f626c6e3a5">pin_mode</a>(SCK,  <a class="code" href="gpio_8h.html#a491a2cbfb4e94f2afcc0d5bdef2dc454a2ab08d3e103968f5f4f26b66a52e99d6">OUTPUT</a>);</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <a class="code" href="gpio_8h.html#a3d3d10f2a2e5b693dd48f8f626c6e3a5">pin_mode</a>(MOSI, <a class="code" href="gpio_8h.html#a491a2cbfb4e94f2afcc0d5bdef2dc454a2ab08d3e103968f5f4f26b66a52e99d6">OUTPUT</a>);</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <a class="code" href="gpio_8h.html#a3d3d10f2a2e5b693dd48f8f626c6e3a5">pin_mode</a>(MISO, <a class="code" href="gpio_8h.html#a491a2cbfb4e94f2afcc0d5bdef2dc454ae310c909d76b003d016bef8bdf16936a">INPUT</a>);</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;}</div><div class="ttc" id="gpio_8h_html_a3d3d10f2a2e5b693dd48f8f626c6e3a5"><div class="ttname"><a href="gpio_8h.html#a3d3d10f2a2e5b693dd48f8f626c6e3a5">pin_mode</a></div><div class="ttdeci">void pin_mode(pins_t pin, gpio_mode_t mode)</div><div class="ttdoc">Initialize a pin with a certain mode (INPUT, INPUT_PULLUP, OUTPUT). </div><div class="ttdef"><b>Definition:</b> <a href="gpio_8h_source.html#l00091">gpio.h:91</a></div></div>
<div class="ttc" id="classSPI_html_af05eaef265f31ddf0fddf5189112fa16a7b1f36343242c16f11c88f9343b3f594"><div class="ttname"><a href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16a7b1f36343242c16f11c88f9343b3f594">SPI::SPI_MASTER</a></div><div class="ttdoc">SPI master mode. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00265">spi.h:265</a></div></div>
<div class="ttc" id="classSPI_html_a1ad111bb98a9e3c6190eb550a9318e68"><div class="ttname"><a href="classSPI.html#a1ad111bb98a9e3c6190eb550a9318e68">SPI::_mode</a></div><div class="ttdeci">volatile spi_mode_t _mode</div><div class="ttdoc">SPI mode. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00270">spi.h:270</a></div></div>
<div class="ttc" id="gpio_8h_html_aa69721b2fc6149a3f33cf1d41034196f"><div class="ttname"><a href="gpio_8h.html#aa69721b2fc6149a3f33cf1d41034196f">pin_write</a></div><div class="ttdeci">void pin_write(pins_t pin, bool value)</div><div class="ttdoc">Write a digital value on the selected pin. </div><div class="ttdef"><b>Definition:</b> <a href="gpio_8h_source.html#l00111">gpio.h:111</a></div></div>
<div class="ttc" id="gpio_8h_html_a491a2cbfb4e94f2afcc0d5bdef2dc454a2ab08d3e103968f5f4f26b66a52e99d6"><div class="ttname"><a href="gpio_8h.html#a491a2cbfb4e94f2afcc0d5bdef2dc454a2ab08d3e103968f5f4f26b66a52e99d6">OUTPUT</a></div><div class="ttdoc">Pin configured as output (DDR(1)) </div><div class="ttdef"><b>Definition:</b> <a href="gpio_8h_source.html#l00061">gpio.h:61</a></div></div>
<div class="ttc" id="gpio_8h_html_a491a2cbfb4e94f2afcc0d5bdef2dc454ae310c909d76b003d016bef8bdf16936a"><div class="ttname"><a href="gpio_8h.html#a491a2cbfb4e94f2afcc0d5bdef2dc454ae310c909d76b003d016bef8bdf16936a">INPUT</a></div><div class="ttdoc">Pin configured as input (DDR(0)) </div><div class="ttdef"><b>Definition:</b> <a href="gpio_8h_source.html#l00060">gpio.h:60</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0e320ac29f052e2eef1d563b5a26ca9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e320ac29f052e2eef1d563b5a26ca9e">&#9670;&nbsp;</a></span>start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SPI::start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spi__defs_8h.html#structspi__conf__t">spi_conf_t</a> *&#160;</td>
          <td class="paramname"><em>conf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the <a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> bus as master with the given configuration. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conf</td><td>Pointer to <a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> bus configuration <a class="el" href="spi__defs_8h.html#structspi__conf__t" title="SPI configuration. ">spi_conf_t</a>. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="spi_8cpp_source.html#l00050">50</a> of file <a class="el" href="spi_8cpp_source.html">spi.cpp</a>.</p>

<p class="reference">References <a class="el" href="spi_8h_source.html#l00270">_mode</a>, <a class="el" href="atomic_8h_source.html#l00019">ATOMIC</a>, <a class="el" href="spi__defs_8h_source.html#l00099">spi_conf_t::ctrl</a>, <a class="el" href="spi__defs_8h_source.html#l00081">spi_ctrl_t::raw</a>, <a class="el" href="spi__defs_8h_source.html#l00090">spi_stat_t::raw</a>, <a class="el" href="spi_8h_source.html#l00265">SPI_MASTER</a>, and <a class="el" href="spi__defs_8h_source.html#l00100">spi_conf_t::stat</a>.</p>

<p class="reference">Referenced by <a class="el" href="spi_8cpp_source.html#l00209">SPI::Device::begin_transaction()</a>.</p>
<div class="fragment"><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                                {</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="comment">// Only for master mode</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classSPI.html#a1ad111bb98a9e3c6190eb550a9318e68">_mode</a> != <a class="code" href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16a7b1f36343242c16f11c88f9343b3f594">SPI_MASTER</a>)</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="comment">// Setup with given config.</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="atomic_8h.html#a1222129ee14a35c47bfe00baf377d8aa">ATOMIC</a>({</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        SPCR = conf-&gt;<a class="code" href="spi__defs_8h.html#a878d6b89412aff891338a75cc88971a3">ctrl</a>.<a class="code" href="spi__defs_8h.html#abe0a6bfad93a982c30fa455bd17576c0">raw</a>;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        SPSR = conf-&gt;<a class="code" href="spi__defs_8h.html#a5faf24e2b4129f65f62482a12d0860b0">stat</a>.<a class="code" href="spi__defs_8h.html#a096198f485700aa1c30a07d49b5d79b3">raw</a>;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    });</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;}</div><div class="ttc" id="spi__defs_8h_html_a5faf24e2b4129f65f62482a12d0860b0"><div class="ttname"><a href="spi__defs_8h.html#a5faf24e2b4129f65f62482a12d0860b0">spi_conf_t::stat</a></div><div class="ttdeci">spi_stat_t stat</div><div class="ttdoc">Status register. </div><div class="ttdef"><b>Definition:</b> <a href="spi__defs_8h_source.html#l00100">spi_defs.h:100</a></div></div>
<div class="ttc" id="spi__defs_8h_html_abe0a6bfad93a982c30fa455bd17576c0"><div class="ttname"><a href="spi__defs_8h.html#abe0a6bfad93a982c30fa455bd17576c0">spi_ctrl_t::raw</a></div><div class="ttdeci">uint8_t raw</div><div class="ttdoc">Raw data. </div><div class="ttdef"><b>Definition:</b> <a href="spi__defs_8h_source.html#l00081">spi_defs.h:81</a></div></div>
<div class="ttc" id="classSPI_html_af05eaef265f31ddf0fddf5189112fa16a7b1f36343242c16f11c88f9343b3f594"><div class="ttname"><a href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16a7b1f36343242c16f11c88f9343b3f594">SPI::SPI_MASTER</a></div><div class="ttdoc">SPI master mode. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00265">spi.h:265</a></div></div>
<div class="ttc" id="classSPI_html_a1ad111bb98a9e3c6190eb550a9318e68"><div class="ttname"><a href="classSPI.html#a1ad111bb98a9e3c6190eb550a9318e68">SPI::_mode</a></div><div class="ttdeci">volatile spi_mode_t _mode</div><div class="ttdoc">SPI mode. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00270">spi.h:270</a></div></div>
<div class="ttc" id="spi__defs_8h_html_a096198f485700aa1c30a07d49b5d79b3"><div class="ttname"><a href="spi__defs_8h.html#a096198f485700aa1c30a07d49b5d79b3">spi_stat_t::raw</a></div><div class="ttdeci">uint8_t raw</div><div class="ttdoc">Raw data. </div><div class="ttdef"><b>Definition:</b> <a href="spi__defs_8h_source.html#l00090">spi_defs.h:90</a></div></div>
<div class="ttc" id="spi__defs_8h_html_a878d6b89412aff891338a75cc88971a3"><div class="ttname"><a href="spi__defs_8h.html#a878d6b89412aff891338a75cc88971a3">spi_conf_t::ctrl</a></div><div class="ttdeci">spi_ctrl_t ctrl</div><div class="ttdoc">Control register. </div><div class="ttdef"><b>Definition:</b> <a href="spi__defs_8h_source.html#l00099">spi_defs.h:99</a></div></div>
<div class="ttc" id="atomic_8h_html_a1222129ee14a35c47bfe00baf377d8aa"><div class="ttname"><a href="atomic_8h.html#a1222129ee14a35c47bfe00baf377d8aa">ATOMIC</a></div><div class="ttdeci">#define ATOMIC(code)</div><div class="ttdef"><b>Definition:</b> <a href="atomic_8h_source.html#l00019">atomic.h:19</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad7a2b7cd743b1afb350352ea9c016244"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7a2b7cd743b1afb350352ea9c016244">&#9670;&nbsp;</a></span>get_config() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SPI::get_config </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spi__defs_8h.html#structspi__conf__t">spi_conf_t</a> *&#160;</td>
          <td class="paramname"><em>conf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the master configuration struct with the default values: F_CPU/4[Hz], SPI_MODE_0, MSB_FIRST. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conf</td><td>Pointer to <a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> bus configuration <a class="el" href="spi__defs_8h.html#structspi__conf__t" title="SPI configuration. ">spi_conf_t</a>. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="spi_8cpp_source.html#l00061">61</a> of file <a class="el" href="spi_8cpp_source.html">spi.cpp</a>.</p>

<p class="reference">References <a class="el" href="spi__defs_8h_source.html#l00062">MSB_FIRST</a>, <a class="el" href="spi__defs_8h_source.html#l00017">SPI_MAX_FREQ</a>, and <a class="el" href="spi__defs_8h_source.html#l00050">SPI_MODE_0</a>.</p>

<p class="reference">Referenced by <a class="el" href="spi_8cpp_source.html#l00205">SPI::Device::configure()</a>, and <a class="el" href="spi_8cpp_source.html#l00198">SPI::Device::Device()</a>.</p>
<div class="fragment"><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                                     {</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="classSPI.html#ad7a2b7cd743b1afb350352ea9c016244">get_config</a>(conf, <a class="code" href="spi__defs_8h.html#a92a622479285b853ed0346aa79439c22">SPI_MAX_FREQ</a>/2, <a class="code" href="spi__defs_8h.html#a6a811e2cb7c515e1f80c0864eb963ce0a152359b11fb4b43ed0c5485eb0ab0673">SPI_MODE_0</a>, <a class="code" href="spi__defs_8h.html#abc9694da8207cd746e9c9e55cc6b9fefa89da3ebae748913c4ea84ed340c20aec">MSB_FIRST</a>);</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;}</div><div class="ttc" id="spi__defs_8h_html_a6a811e2cb7c515e1f80c0864eb963ce0a152359b11fb4b43ed0c5485eb0ab0673"><div class="ttname"><a href="spi__defs_8h.html#a6a811e2cb7c515e1f80c0864eb963ce0a152359b11fb4b43ed0c5485eb0ab0673">SPI_MODE_0</a></div><div class="ttdoc">CPOL(0), CPHA(0): Clock low when inactive, Data is valid on clock leading edge. </div><div class="ttdef"><b>Definition:</b> <a href="spi__defs_8h_source.html#l00050">spi_defs.h:50</a></div></div>
<div class="ttc" id="spi__defs_8h_html_a92a622479285b853ed0346aa79439c22"><div class="ttname"><a href="spi__defs_8h.html#a92a622479285b853ed0346aa79439c22">SPI_MAX_FREQ</a></div><div class="ttdeci">#define SPI_MAX_FREQ</div><div class="ttdef"><b>Definition:</b> <a href="spi__defs_8h_source.html#l00017">spi_defs.h:17</a></div></div>
<div class="ttc" id="spi__defs_8h_html_abc9694da8207cd746e9c9e55cc6b9fefa89da3ebae748913c4ea84ed340c20aec"><div class="ttname"><a href="spi__defs_8h.html#abc9694da8207cd746e9c9e55cc6b9fefa89da3ebae748913c4ea84ed340c20aec">MSB_FIRST</a></div><div class="ttdoc">Send MSB bit first. </div><div class="ttdef"><b>Definition:</b> <a href="spi__defs_8h_source.html#l00062">spi_defs.h:62</a></div></div>
<div class="ttc" id="classSPI_html_ad7a2b7cd743b1afb350352ea9c016244"><div class="ttname"><a href="classSPI.html#ad7a2b7cd743b1afb350352ea9c016244">SPI::get_config</a></div><div class="ttdeci">void get_config(spi_conf_t *conf)</div><div class="ttdoc">Initialize the master configuration struct with the default values: F_CPU/4[Hz], SPI_MODE_0, MSB_FIRST. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8cpp_source.html#l00061">spi.cpp:61</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7fe20cc29d639e4a38bb9b50b78aa0f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fe20cc29d639e4a38bb9b50b78aa0f3">&#9670;&nbsp;</a></span>get_config() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SPI::get_config </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spi__defs_8h.html#structspi__conf__t">spi_conf_t</a> *&#160;</td>
          <td class="paramname"><em>conf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>freq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="spi__defs_8h.html#a6a811e2cb7c515e1f80c0864eb963ce0">spi_tx_mode_t</a>&#160;</td>
          <td class="paramname"><em>tx_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="spi__defs_8h.html#abc9694da8207cd746e9c9e55cc6b9fef">spi_ds_mode_t</a>&#160;</td>
          <td class="paramname"><em>bit_order</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the <a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> configuration. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conf</td><td>Pointer to <a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> bus configuration <a class="el" href="spi__defs_8h.html#structspi__conf__t" title="SPI configuration. ">spi_conf_t</a>. </td></tr>
    <tr><td class="paramname">freq</td><td><a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> SCLK frequency. </td></tr>
    <tr><td class="paramname">tx_mode</td><td><a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> transmission mode spi_tx_mode_t. </td></tr>
    <tr><td class="paramname">bit_order</td><td><a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> data transmission mode spi_ds_mode_t. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="spi_8cpp_source.html#l00065">65</a> of file <a class="el" href="spi_8cpp_source.html">spi.cpp</a>.</p>

<p class="reference">References <a class="el" href="spi__defs_8h_source.html#l00026">spi_spcr_t::cconf</a>, <a class="el" href="spi__defs_8h_source.html#l00099">spi_conf_t::ctrl</a>, <a class="el" href="spi__defs_8h_source.html#l00028">spi_spcr_t::dord</a>, <a class="el" href="spi__defs_8h_source.html#l00082">spi_ctrl_t::field</a>, <a class="el" href="spi__defs_8h_source.html#l00091">spi_stat_t::field</a>, <a class="el" href="spi_8cpp_source.html#l00299">get_prescaler()</a>, <a class="el" href="spi__defs_8h_source.html#l00027">spi_spcr_t::mstr</a>, <a class="el" href="spi__defs_8h_source.html#l00081">spi_ctrl_t::raw</a>, <a class="el" href="spi__defs_8h_source.html#l00090">spi_stat_t::raw</a>, <a class="el" href="spi__defs_8h_source.html#l00029">spi_spcr_t::spe</a>, <a class="el" href="spi__defs_8h_source.html#l00038">spi_spsr_t::spi2x</a>, <a class="el" href="spi__defs_8h_source.html#l00017">SPI_MAX_FREQ</a>, <a class="el" href="spi__defs_8h_source.html#l00025">spi_spcr_t::spr</a>, and <a class="el" href="spi__defs_8h_source.html#l00100">spi_conf_t::stat</a>.</p>
<div class="fragment"><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                                                                                                    {</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="comment">// Get prescaler</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    uint8_t prescaler = (freq &gt; <a class="code" href="spi__defs_8h.html#a92a622479285b853ed0346aa79439c22">SPI_MAX_FREQ</a>) ? <a class="code" href="classSPI.html#a1596e3384f6094e9f469e792f8609cc7">get_prescaler</a>(<a class="code" href="spi__defs_8h.html#a92a622479285b853ed0346aa79439c22">SPI_MAX_FREQ</a>) : <a class="code" href="classSPI.html#a1596e3384f6094e9f469e792f8609cc7">get_prescaler</a>(freq);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="comment">// Set control register</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    conf-&gt;<a class="code" href="spi__defs_8h.html#a878d6b89412aff891338a75cc88971a3">ctrl</a>.<a class="code" href="spi__defs_8h.html#abe0a6bfad93a982c30fa455bd17576c0">raw</a>          = 0x00;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    conf-&gt;<a class="code" href="spi__defs_8h.html#a878d6b89412aff891338a75cc88971a3">ctrl</a>.<a class="code" href="spi__defs_8h.html#a7fab2513c9c585dc33cd5011e3306b29">field</a>.<a class="code" href="spi__defs_8h.html#ab40a843d5a439f5433a50709de6fd5d0">spe</a>    = <span class="keyword">true</span>;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    conf-&gt;<a class="code" href="spi__defs_8h.html#a878d6b89412aff891338a75cc88971a3">ctrl</a>.<a class="code" href="spi__defs_8h.html#a7fab2513c9c585dc33cd5011e3306b29">field</a>.<a class="code" href="spi__defs_8h.html#a19614d980ebc6be3f561f5f68ae6fcb7">mstr</a>   = <span class="keyword">true</span>;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    conf-&gt;<a class="code" href="spi__defs_8h.html#a878d6b89412aff891338a75cc88971a3">ctrl</a>.<a class="code" href="spi__defs_8h.html#a7fab2513c9c585dc33cd5011e3306b29">field</a>.<a class="code" href="spi__defs_8h.html#a5db00f843f52a1ab8ef28c127e46bd94">dord</a>   = bit_order;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    conf-&gt;<a class="code" href="spi__defs_8h.html#a878d6b89412aff891338a75cc88971a3">ctrl</a>.<a class="code" href="spi__defs_8h.html#a7fab2513c9c585dc33cd5011e3306b29">field</a>.<a class="code" href="spi__defs_8h.html#a867e411b04909ce969f3d6ad4d222dbc">cconf</a>  = tx_mode;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    conf-&gt;<a class="code" href="spi__defs_8h.html#a878d6b89412aff891338a75cc88971a3">ctrl</a>.<a class="code" href="spi__defs_8h.html#a7fab2513c9c585dc33cd5011e3306b29">field</a>.<a class="code" href="spi__defs_8h.html#a65f17b31614f7763e5b9278e8cdc974a">spr</a>    = (prescaler &amp; 0x03);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="comment">// Set last prescaler bit on status register</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    conf-&gt;<a class="code" href="spi__defs_8h.html#a5faf24e2b4129f65f62482a12d0860b0">stat</a>.<a class="code" href="spi__defs_8h.html#a096198f485700aa1c30a07d49b5d79b3">raw</a>          = 0x00;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    conf-&gt;<a class="code" href="spi__defs_8h.html#a5faf24e2b4129f65f62482a12d0860b0">stat</a>.<a class="code" href="spi__defs_8h.html#ac30b03cd8f3657bbc9152ad2d6fbe21e">field</a>.<a class="code" href="spi__defs_8h.html#a6b4837e1c03199c4fe6d65f04f92ebc4">spi2x</a>  = ((prescaler &gt;&gt; 2) &amp; 0x01);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;}</div><div class="ttc" id="spi__defs_8h_html_a5faf24e2b4129f65f62482a12d0860b0"><div class="ttname"><a href="spi__defs_8h.html#a5faf24e2b4129f65f62482a12d0860b0">spi_conf_t::stat</a></div><div class="ttdeci">spi_stat_t stat</div><div class="ttdoc">Status register. </div><div class="ttdef"><b>Definition:</b> <a href="spi__defs_8h_source.html#l00100">spi_defs.h:100</a></div></div>
<div class="ttc" id="spi__defs_8h_html_a92a622479285b853ed0346aa79439c22"><div class="ttname"><a href="spi__defs_8h.html#a92a622479285b853ed0346aa79439c22">SPI_MAX_FREQ</a></div><div class="ttdeci">#define SPI_MAX_FREQ</div><div class="ttdef"><b>Definition:</b> <a href="spi__defs_8h_source.html#l00017">spi_defs.h:17</a></div></div>
<div class="ttc" id="spi__defs_8h_html_ac30b03cd8f3657bbc9152ad2d6fbe21e"><div class="ttname"><a href="spi__defs_8h.html#ac30b03cd8f3657bbc9152ad2d6fbe21e">spi_stat_t::field</a></div><div class="ttdeci">spi_spsr_t field</div><div class="ttdoc">Data formatted as status register. </div><div class="ttdef"><b>Definition:</b> <a href="spi__defs_8h_source.html#l00091">spi_defs.h:91</a></div></div>
<div class="ttc" id="spi__defs_8h_html_abe0a6bfad93a982c30fa455bd17576c0"><div class="ttname"><a href="spi__defs_8h.html#abe0a6bfad93a982c30fa455bd17576c0">spi_ctrl_t::raw</a></div><div class="ttdeci">uint8_t raw</div><div class="ttdoc">Raw data. </div><div class="ttdef"><b>Definition:</b> <a href="spi__defs_8h_source.html#l00081">spi_defs.h:81</a></div></div>
<div class="ttc" id="spi__defs_8h_html_ab40a843d5a439f5433a50709de6fd5d0"><div class="ttname"><a href="spi__defs_8h.html#ab40a843d5a439f5433a50709de6fd5d0">spi_spcr_t::spe</a></div><div class="ttdeci">uint8_t spe</div><div class="ttdoc">SPI enable. </div><div class="ttdef"><b>Definition:</b> <a href="spi__defs_8h_source.html#l00029">spi_defs.h:29</a></div></div>
<div class="ttc" id="spi__defs_8h_html_a6b4837e1c03199c4fe6d65f04f92ebc4"><div class="ttname"><a href="spi__defs_8h.html#a6b4837e1c03199c4fe6d65f04f92ebc4">spi_spsr_t::spi2x</a></div><div class="ttdeci">uint8_t spi2x</div><div class="ttdoc">SPI double speed. </div><div class="ttdef"><b>Definition:</b> <a href="spi__defs_8h_source.html#l00038">spi_defs.h:38</a></div></div>
<div class="ttc" id="spi__defs_8h_html_a7fab2513c9c585dc33cd5011e3306b29"><div class="ttname"><a href="spi__defs_8h.html#a7fab2513c9c585dc33cd5011e3306b29">spi_ctrl_t::field</a></div><div class="ttdeci">spi_spcr_t field</div><div class="ttdoc">Data formatted as control register. </div><div class="ttdef"><b>Definition:</b> <a href="spi__defs_8h_source.html#l00082">spi_defs.h:82</a></div></div>
<div class="ttc" id="spi__defs_8h_html_a65f17b31614f7763e5b9278e8cdc974a"><div class="ttname"><a href="spi__defs_8h.html#a65f17b31614f7763e5b9278e8cdc974a">spi_spcr_t::spr</a></div><div class="ttdeci">uint8_t spr</div><div class="ttdoc">Clock rate select. </div><div class="ttdef"><b>Definition:</b> <a href="spi__defs_8h_source.html#l00025">spi_defs.h:25</a></div></div>
<div class="ttc" id="spi__defs_8h_html_a867e411b04909ce969f3d6ad4d222dbc"><div class="ttname"><a href="spi__defs_8h.html#a867e411b04909ce969f3d6ad4d222dbc">spi_spcr_t::cconf</a></div><div class="ttdeci">uint8_t cconf</div><div class="ttdoc">Clock phase &amp; polarity. </div><div class="ttdef"><b>Definition:</b> <a href="spi__defs_8h_source.html#l00026">spi_defs.h:26</a></div></div>
<div class="ttc" id="spi__defs_8h_html_a096198f485700aa1c30a07d49b5d79b3"><div class="ttname"><a href="spi__defs_8h.html#a096198f485700aa1c30a07d49b5d79b3">spi_stat_t::raw</a></div><div class="ttdeci">uint8_t raw</div><div class="ttdoc">Raw data. </div><div class="ttdef"><b>Definition:</b> <a href="spi__defs_8h_source.html#l00090">spi_defs.h:90</a></div></div>
<div class="ttc" id="spi__defs_8h_html_a878d6b89412aff891338a75cc88971a3"><div class="ttname"><a href="spi__defs_8h.html#a878d6b89412aff891338a75cc88971a3">spi_conf_t::ctrl</a></div><div class="ttdeci">spi_ctrl_t ctrl</div><div class="ttdoc">Control register. </div><div class="ttdef"><b>Definition:</b> <a href="spi__defs_8h_source.html#l00099">spi_defs.h:99</a></div></div>
<div class="ttc" id="spi__defs_8h_html_a19614d980ebc6be3f561f5f68ae6fcb7"><div class="ttname"><a href="spi__defs_8h.html#a19614d980ebc6be3f561f5f68ae6fcb7">spi_spcr_t::mstr</a></div><div class="ttdeci">uint8_t mstr</div><div class="ttdoc">Master/slave select. </div><div class="ttdef"><b>Definition:</b> <a href="spi__defs_8h_source.html#l00027">spi_defs.h:27</a></div></div>
<div class="ttc" id="classSPI_html_a1596e3384f6094e9f469e792f8609cc7"><div class="ttname"><a href="classSPI.html#a1596e3384f6094e9f469e792f8609cc7">SPI::get_prescaler</a></div><div class="ttdeci">uint8_t get_prescaler(uint32_t freq)</div><div class="ttdoc">Calculate the most adequate prescaler depending on the selected frequency. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8cpp_source.html#l00299">spi.cpp:299</a></div></div>
<div class="ttc" id="spi__defs_8h_html_a5db00f843f52a1ab8ef28c127e46bd94"><div class="ttname"><a href="spi__defs_8h.html#a5db00f843f52a1ab8ef28c127e46bd94">spi_spcr_t::dord</a></div><div class="ttdeci">uint8_t dord</div><div class="ttdoc">Data order. </div><div class="ttdef"><b>Definition:</b> <a href="spi__defs_8h_source.html#l00028">spi_defs.h:28</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0dd51237a0b5544ffb240cf00342f3aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0dd51237a0b5544ffb240cf00342f3aa">&#9670;&nbsp;</a></span>transfer() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t SPI::transfer </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The master send a single byte to the slave and returns it's response. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Byte to send. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Slave response byte. </dd></dl>

<p class="definition">Definition at line <a class="el" href="spi_8cpp_source.html#l00081">81</a> of file <a class="el" href="spi_8cpp_source.html">spi.cpp</a>.</p>

<p class="reference">References <a class="el" href="spi_8h_source.html#l00270">_mode</a>, and <a class="el" href="spi_8h_source.html#l00265">SPI_MASTER</a>.</p>

<p class="reference">Referenced by <a class="el" href="spi_8cpp_source.html#l00162">read()</a>, <a class="el" href="spi_8cpp_source.html#l00094">transfer()</a>, <a class="el" href="spi_8cpp_source.html#l00218">SPI::Device::transfer()</a>, and <a class="el" href="spi_8cpp_source.html#l00126">write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                                  {</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="comment">// Only for master mode</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classSPI.html#a1ad111bb98a9e3c6190eb550a9318e68">_mode</a> != <a class="code" href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16a7b1f36343242c16f11c88f9343b3f594">SPI_MASTER</a>)</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="keywordflow">return</span> 0x00;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment">// Prepare data</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    SPDR = data;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="comment">// Wait until the data is sent</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    __asm__ __volatile__(<span class="stringliteral">&quot;nop&quot;</span> ::: <span class="stringliteral">&quot;memory&quot;</span>);</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    loop_until_bit_is_set(SPSR, SPIF);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="comment">// Return data received</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">return</span> SPDR;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;}</div><div class="ttc" id="classSPI_html_af05eaef265f31ddf0fddf5189112fa16a7b1f36343242c16f11c88f9343b3f594"><div class="ttname"><a href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16a7b1f36343242c16f11c88f9343b3f594">SPI::SPI_MASTER</a></div><div class="ttdoc">SPI master mode. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00265">spi.h:265</a></div></div>
<div class="ttc" id="classSPI_html_a1ad111bb98a9e3c6190eb550a9318e68"><div class="ttname"><a href="classSPI.html#a1ad111bb98a9e3c6190eb550a9318e68">SPI::_mode</a></div><div class="ttdeci">volatile spi_mode_t _mode</div><div class="ttdoc">SPI mode. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00270">spi.h:270</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab8223ba4709f81d8124d2b67bf2e351b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8223ba4709f81d8124d2b67bf2e351b">&#9670;&nbsp;</a></span>transfer() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SPI::transfer </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>off</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>dly</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform a data transfer between the <a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> master and the slave. Send "size" bytes from "src" and save the responses on "rec". The method allow to start saving the responses after "offset" bytes sent (the master will send "offset" dummy bytes after "src" is transmitted to get the full response) and add delay after each transfer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">src</td><td>Pointer to source byte array. </td></tr>
    <tr><td class="paramname">rec</td><td>Pointer to received byte array. </td></tr>
    <tr><td class="paramname">size</td><td>Bytes to be transfered. </td></tr>
    <tr><td class="paramname">off</td><td>Offset (in bytes). </td></tr>
    <tr><td class="paramname">dly</td><td>Time to wait between transfers (in [us]). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="spi_8cpp_source.html#l00094">94</a> of file <a class="el" href="spi_8cpp_source.html">spi.cpp</a>.</p>

<p class="reference">References <a class="el" href="spi_8h_source.html#l00270">_mode</a>, <a class="el" href="timing_8cpp_source.html#l00072">delay_micros()</a>, <a class="el" href="spi_8h_source.html#l00265">SPI_MASTER</a>, and <a class="el" href="spi_8cpp_source.html#l00081">transfer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                                                                                     {</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="comment">// Only for master mode</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classSPI.html#a1ad111bb98a9e3c6190eb550a9318e68">_mode</a> != <a class="code" href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16a7b1f36343242c16f11c88f9343b3f594">SPI_MASTER</a>)</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="comment">// Check buffers</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">if</span> ((size == 0) || (src == NULL) || (rec == NULL))</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment">// Prepare</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    uint8_t state = (off &gt; 0)? 0 : 1;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// Transfer</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">for</span> (uint16_t idx = 0; idx &lt; (size + off); idx++) {</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keywordflow">switch</span> (state) {</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            <span class="keywordflow">case</span> 0: {</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                <a class="code" href="classSPI.html#a0dd51237a0b5544ffb240cf00342f3aa">transfer</a>(*src++);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                <span class="keywordflow">if</span> (idx &gt;= (uint8_t)(off - 1)) state = 1;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            } <span class="keywordflow">break</span>;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            <span class="keywordflow">case</span> 1: {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                *rec++ = <a class="code" href="classSPI.html#a0dd51237a0b5544ffb240cf00342f3aa">transfer</a>(*src++);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                <span class="keywordflow">if</span> (idx &gt;= (uint8_t)(size - 1)) state = 2;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            } <span class="keywordflow">break</span>;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            <span class="keywordflow">case</span> 2: {</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                *rec++ = <a class="code" href="classSPI.html#a0dd51237a0b5544ffb240cf00342f3aa">transfer</a>(0x00);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            } <span class="keywordflow">break</span>;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        }</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordflow">if</span> (dly &gt; 0) <a class="code" href="timing_8cpp.html#ae065ead6e4681d8e0ed087d47b19737d">delay_micros</a>(dly);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    }</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;}</div><div class="ttc" id="timing_8cpp_html_ae065ead6e4681d8e0ed087d47b19737d"><div class="ttname"><a href="timing_8cpp.html#ae065ead6e4681d8e0ed087d47b19737d">delay_micros</a></div><div class="ttdeci">void delay_micros(uint16_t us)</div><div class="ttdoc">Busy-delay implementation to delay in [us]. Maximum delay value recommended: 16[ms]. </div><div class="ttdef"><b>Definition:</b> <a href="timing_8cpp_source.html#l00072">timing.cpp:72</a></div></div>
<div class="ttc" id="classSPI_html_af05eaef265f31ddf0fddf5189112fa16a7b1f36343242c16f11c88f9343b3f594"><div class="ttname"><a href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16a7b1f36343242c16f11c88f9343b3f594">SPI::SPI_MASTER</a></div><div class="ttdoc">SPI master mode. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00265">spi.h:265</a></div></div>
<div class="ttc" id="classSPI_html_a1ad111bb98a9e3c6190eb550a9318e68"><div class="ttname"><a href="classSPI.html#a1ad111bb98a9e3c6190eb550a9318e68">SPI::_mode</a></div><div class="ttdeci">volatile spi_mode_t _mode</div><div class="ttdoc">SPI mode. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00270">spi.h:270</a></div></div>
<div class="ttc" id="classSPI_html_a0dd51237a0b5544ffb240cf00342f3aa"><div class="ttname"><a href="classSPI.html#a0dd51237a0b5544ffb240cf00342f3aa">SPI::transfer</a></div><div class="ttdeci">uint8_t transfer(uint8_t data)</div><div class="ttdoc">The master send a single byte to the slave and returns it&amp;#39;s response. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8cpp_source.html#l00081">spi.cpp:81</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a875e2d2f853e068acd1721b49a5cdd13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a875e2d2f853e068acd1721b49a5cdd13">&#9670;&nbsp;</a></span>write() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SPI::write </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>dly</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>write(uint8_t*, uint8_t, uint16_t) handler for 1 byte "src". </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">src</td><td>Source byte. </td></tr>
    <tr><td class="paramname">dly</td><td>Time to wait after write (in [us]). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="spi_8cpp_source.html#l00122">122</a> of file <a class="el" href="spi_8cpp_source.html">spi.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="spi_8cpp_source.html#l00180">read_reg()</a>, <a class="el" href="spi_8cpp_source.html#l00226">SPI::Device::write()</a>, and <a class="el" href="spi_8cpp_source.html#l00144">write_reg()</a>.</p>
<div class="fragment"><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                                         {</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <a class="code" href="classSPI.html#a875e2d2f853e068acd1721b49a5cdd13">write</a>(&amp;src, 1, dly);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;}</div><div class="ttc" id="classSPI_html_a875e2d2f853e068acd1721b49a5cdd13"><div class="ttname"><a href="classSPI.html#a875e2d2f853e068acd1721b49a5cdd13">SPI::write</a></div><div class="ttdeci">void write(uint8_t src, uint16_t dly=0)</div><div class="ttdoc">write(uint8_t*, uint8_t, uint16_t) handler for 1 byte &quot;src&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8cpp_source.html#l00122">spi.cpp:122</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a856d019b14d9028bf8d0255de60df42e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a856d019b14d9028bf8d0255de60df42e">&#9670;&nbsp;</a></span>write() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SPI::write </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>dly</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write "size" bytes from "src" to the slave. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">src</td><td>Pointer to source byte array. </td></tr>
    <tr><td class="paramname">size</td><td>Bytes to be transmitted. </td></tr>
    <tr><td class="paramname">dly</td><td>Time to wait between writes (in [us]). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="spi_8cpp_source.html#l00126">126</a> of file <a class="el" href="spi_8cpp_source.html">spi.cpp</a>.</p>

<p class="reference">References <a class="el" href="spi_8h_source.html#l00270">_mode</a>, <a class="el" href="timing_8cpp_source.html#l00072">delay_micros()</a>, <a class="el" href="spi_8h_source.html#l00265">SPI_MASTER</a>, and <a class="el" href="spi_8cpp_source.html#l00081">transfer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                                                       {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="comment">// Only for master mode</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classSPI.html#a1ad111bb98a9e3c6190eb550a9318e68">_mode</a> != <a class="code" href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16a7b1f36343242c16f11c88f9343b3f594">SPI_MASTER</a>)</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="comment">// Check buffer</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordflow">if</span> ((size == 0) || (src == NULL))</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="comment">// Send</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">while</span> (size--) {</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <a class="code" href="classSPI.html#a0dd51237a0b5544ffb240cf00342f3aa">transfer</a>(*src++);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keywordflow">if</span> (dly &gt; 0) <a class="code" href="timing_8cpp.html#ae065ead6e4681d8e0ed087d47b19737d">delay_micros</a>(dly);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;}</div><div class="ttc" id="timing_8cpp_html_ae065ead6e4681d8e0ed087d47b19737d"><div class="ttname"><a href="timing_8cpp.html#ae065ead6e4681d8e0ed087d47b19737d">delay_micros</a></div><div class="ttdeci">void delay_micros(uint16_t us)</div><div class="ttdoc">Busy-delay implementation to delay in [us]. Maximum delay value recommended: 16[ms]. </div><div class="ttdef"><b>Definition:</b> <a href="timing_8cpp_source.html#l00072">timing.cpp:72</a></div></div>
<div class="ttc" id="classSPI_html_af05eaef265f31ddf0fddf5189112fa16a7b1f36343242c16f11c88f9343b3f594"><div class="ttname"><a href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16a7b1f36343242c16f11c88f9343b3f594">SPI::SPI_MASTER</a></div><div class="ttdoc">SPI master mode. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00265">spi.h:265</a></div></div>
<div class="ttc" id="classSPI_html_a1ad111bb98a9e3c6190eb550a9318e68"><div class="ttname"><a href="classSPI.html#a1ad111bb98a9e3c6190eb550a9318e68">SPI::_mode</a></div><div class="ttdeci">volatile spi_mode_t _mode</div><div class="ttdoc">SPI mode. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00270">spi.h:270</a></div></div>
<div class="ttc" id="classSPI_html_a0dd51237a0b5544ffb240cf00342f3aa"><div class="ttname"><a href="classSPI.html#a0dd51237a0b5544ffb240cf00342f3aa">SPI::transfer</a></div><div class="ttdeci">uint8_t transfer(uint8_t data)</div><div class="ttdoc">The master send a single byte to the slave and returns it&amp;#39;s response. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8cpp_source.html#l00081">spi.cpp:81</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5e86b55d372c2d49b20a62bde146ee19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e86b55d372c2d49b20a62bde146ee19">&#9670;&nbsp;</a></span>write_reg() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SPI::write_reg </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>dly</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>brief write_reg(uint8_t, uint8_t*, uint8_t, uint16_t) handler for 1 byte "src". </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reg</td><td>Slave register address. </td></tr>
    <tr><td class="paramname">src</td><td>Source byte. </td></tr>
    <tr><td class="paramname">dly</td><td>Time to wait after write (in [us]). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="spi_8cpp_source.html#l00140">140</a> of file <a class="el" href="spi_8cpp_source.html">spi.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="spi_8cpp_source.html#l00234">SPI::Device::write_reg()</a>.</p>
<div class="fragment"><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                                                          {</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="classSPI.html#a5e86b55d372c2d49b20a62bde146ee19">write_reg</a>(reg, &amp;src, 1, dly);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;}</div><div class="ttc" id="classSPI_html_a5e86b55d372c2d49b20a62bde146ee19"><div class="ttname"><a href="classSPI.html#a5e86b55d372c2d49b20a62bde146ee19">SPI::write_reg</a></div><div class="ttdeci">void write_reg(uint8_t reg, uint8_t src, uint16_t dly)</div><div class="ttdef"><b>Definition:</b> <a href="spi_8cpp_source.html#l00140">spi.cpp:140</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac85db23327ba7eccd0eb610cc49384b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac85db23327ba7eccd0eb610cc49384b6">&#9670;&nbsp;</a></span>write_reg() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SPI::write_reg </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>dly</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handler of spi_master_write() to simplify the process of write data into a given register on the slave device. It writes "size" bytes from "src" to the "reg" register on the slave. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reg</td><td>Slave register address. </td></tr>
    <tr><td class="paramname">src</td><td>Pointer to source byte array. </td></tr>
    <tr><td class="paramname">size</td><td>Bytes to be transmitted. </td></tr>
    <tr><td class="paramname">dly</td><td>Time to wait between writes (in [us]). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="spi_8cpp_source.html#l00144">144</a> of file <a class="el" href="spi_8cpp_source.html">spi.cpp</a>.</p>

<p class="reference">References <a class="el" href="spi_8h_source.html#l00270">_mode</a>, <a class="el" href="spi_8h_source.html#l00265">SPI_MASTER</a>, and <a class="el" href="spi_8cpp_source.html#l00122">write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                                                                        {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="comment">// Only for master mode</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classSPI.html#a1ad111bb98a9e3c6190eb550a9318e68">_mode</a> != <a class="code" href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16a7b1f36343242c16f11c88f9343b3f594">SPI_MASTER</a>)</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="comment">// Check buffer</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">if</span> ((size == 0) || (src == NULL))</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="comment">// Put the &quot;reg&quot; and &quot;src&quot; in one auxiliary array and send</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    uint8_t* reg_src = (uint8_t*) malloc((size + 1));</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    memcpy(reg_src, &amp;reg, 1);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    memcpy((reg_src + 1), src, size);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="comment">// Write the register</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="classSPI.html#a875e2d2f853e068acd1721b49a5cdd13">write</a>(reg_src, size, dly);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="comment">// Free the auxiliary space</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    free(reg_src);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;}</div><div class="ttc" id="classSPI_html_af05eaef265f31ddf0fddf5189112fa16a7b1f36343242c16f11c88f9343b3f594"><div class="ttname"><a href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16a7b1f36343242c16f11c88f9343b3f594">SPI::SPI_MASTER</a></div><div class="ttdoc">SPI master mode. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00265">spi.h:265</a></div></div>
<div class="ttc" id="classSPI_html_a1ad111bb98a9e3c6190eb550a9318e68"><div class="ttname"><a href="classSPI.html#a1ad111bb98a9e3c6190eb550a9318e68">SPI::_mode</a></div><div class="ttdeci">volatile spi_mode_t _mode</div><div class="ttdoc">SPI mode. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00270">spi.h:270</a></div></div>
<div class="ttc" id="classSPI_html_a875e2d2f853e068acd1721b49a5cdd13"><div class="ttname"><a href="classSPI.html#a875e2d2f853e068acd1721b49a5cdd13">SPI::write</a></div><div class="ttdeci">void write(uint8_t src, uint16_t dly=0)</div><div class="ttdoc">write(uint8_t*, uint8_t, uint16_t) handler for 1 byte &quot;src&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8cpp_source.html#l00122">spi.cpp:122</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac0f9081b47949595eec8fee5365b5d7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0f9081b47949595eec8fee5365b5d7f">&#9670;&nbsp;</a></span>read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SPI::read </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>dly</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read "size" bytes from the slave to "rec". </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rec</td><td>Pointer to received byte array. </td></tr>
    <tr><td class="paramname">size</td><td>Bytes to be read. </td></tr>
    <tr><td class="paramname">dly</td><td>Time to wait between reads (in [us]). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="spi_8cpp_source.html#l00162">162</a> of file <a class="el" href="spi_8cpp_source.html">spi.cpp</a>.</p>

<p class="reference">References <a class="el" href="spi_8h_source.html#l00270">_mode</a>, <a class="el" href="timing_8cpp_source.html#l00072">delay_micros()</a>, <a class="el" href="spi_8h_source.html#l00265">SPI_MASTER</a>, and <a class="el" href="spi_8cpp_source.html#l00081">transfer()</a>.</p>

<p class="reference">Referenced by <a class="el" href="spi_8cpp_source.html#l00242">SPI::Device::read()</a>, and <a class="el" href="spi_8cpp_source.html#l00180">read_reg()</a>.</p>
<div class="fragment"><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                                                      {</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="comment">// Only for master mode</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classSPI.html#a1ad111bb98a9e3c6190eb550a9318e68">_mode</a> != <a class="code" href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16a7b1f36343242c16f11c88f9343b3f594">SPI_MASTER</a>)</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="comment">// Check buffer</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordflow">if</span> ((size == 0) || (rec == NULL))</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="comment">// Receive</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">while</span> (size--) {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        *rec++ = <a class="code" href="classSPI.html#a0dd51237a0b5544ffb240cf00342f3aa">transfer</a>(0x00);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keywordflow">if</span> (dly &gt; 0) <a class="code" href="timing_8cpp.html#ae065ead6e4681d8e0ed087d47b19737d">delay_micros</a>(dly);</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    }</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;}</div><div class="ttc" id="timing_8cpp_html_ae065ead6e4681d8e0ed087d47b19737d"><div class="ttname"><a href="timing_8cpp.html#ae065ead6e4681d8e0ed087d47b19737d">delay_micros</a></div><div class="ttdeci">void delay_micros(uint16_t us)</div><div class="ttdoc">Busy-delay implementation to delay in [us]. Maximum delay value recommended: 16[ms]. </div><div class="ttdef"><b>Definition:</b> <a href="timing_8cpp_source.html#l00072">timing.cpp:72</a></div></div>
<div class="ttc" id="classSPI_html_af05eaef265f31ddf0fddf5189112fa16a7b1f36343242c16f11c88f9343b3f594"><div class="ttname"><a href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16a7b1f36343242c16f11c88f9343b3f594">SPI::SPI_MASTER</a></div><div class="ttdoc">SPI master mode. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00265">spi.h:265</a></div></div>
<div class="ttc" id="classSPI_html_a1ad111bb98a9e3c6190eb550a9318e68"><div class="ttname"><a href="classSPI.html#a1ad111bb98a9e3c6190eb550a9318e68">SPI::_mode</a></div><div class="ttdeci">volatile spi_mode_t _mode</div><div class="ttdoc">SPI mode. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00270">spi.h:270</a></div></div>
<div class="ttc" id="classSPI_html_a0dd51237a0b5544ffb240cf00342f3aa"><div class="ttname"><a href="classSPI.html#a0dd51237a0b5544ffb240cf00342f3aa">SPI::transfer</a></div><div class="ttdeci">uint8_t transfer(uint8_t data)</div><div class="ttdoc">The master send a single byte to the slave and returns it&amp;#39;s response. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8cpp_source.html#l00081">spi.cpp:81</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad774c962966d3aa3641079490c40011e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad774c962966d3aa3641079490c40011e">&#9670;&nbsp;</a></span>read_reg() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SPI::read_reg </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>dly</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>brief read_reg(uint8_t, uint8_t*, uint8_t, uint16_t) handler for 1 byte "rec". </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reg</td><td>Slave register address. </td></tr>
    <tr><td class="paramname">rec</td><td>Receive byte. </td></tr>
    <tr><td class="paramname">dly</td><td>Time to wait after write (in [us]). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="spi_8cpp_source.html#l00176">176</a> of file <a class="el" href="spi_8cpp_source.html">spi.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="spi_8cpp_source.html#l00246">SPI::Device::read_reg()</a>.</p>
<div class="fragment"><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                                                          {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <a class="code" href="classSPI.html#ad774c962966d3aa3641079490c40011e">read_reg</a>(reg, rec, 1, dly);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;}</div><div class="ttc" id="classSPI_html_ad774c962966d3aa3641079490c40011e"><div class="ttname"><a href="classSPI.html#ad774c962966d3aa3641079490c40011e">SPI::read_reg</a></div><div class="ttdeci">void read_reg(uint8_t reg, uint8_t *rec, uint16_t dly)</div><div class="ttdef"><b>Definition:</b> <a href="spi_8cpp_source.html#l00176">spi.cpp:176</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af555dade1560b577640764ad78567e56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af555dade1560b577640764ad78567e56">&#9670;&nbsp;</a></span>read_reg() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SPI::read_reg </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>dly</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handler of spi_master_read() to simplify the process of read data from a given register on the slave device. It reads "size" bytes from the "reg" register on the slave and copy them to "rec". </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reg</td><td>Slave register address. </td></tr>
    <tr><td class="paramname">rec</td><td>Pointer to received byte array. </td></tr>
    <tr><td class="paramname">size</td><td>Bytes to be read. </td></tr>
    <tr><td class="paramname">dly</td><td>Time to wait between reads (in [us]). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="spi_8cpp_source.html#l00180">180</a> of file <a class="el" href="spi_8cpp_source.html">spi.cpp</a>.</p>

<p class="reference">References <a class="el" href="spi_8h_source.html#l00270">_mode</a>, <a class="el" href="spi_8cpp_source.html#l00162">read()</a>, <a class="el" href="spi_8h_source.html#l00265">SPI_MASTER</a>, and <a class="el" href="spi_8cpp_source.html#l00122">write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                                                                       {</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="comment">// Only for master mode</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classSPI.html#a1ad111bb98a9e3c6190eb550a9318e68">_mode</a> != <a class="code" href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16a7b1f36343242c16f11c88f9343b3f594">SPI_MASTER</a>)</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="comment">// Check buffer</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">if</span> ((size == 0) || (rec == NULL))</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="comment">// Write the register</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <a class="code" href="classSPI.html#a875e2d2f853e068acd1721b49a5cdd13">write</a>(&amp;reg, 1, dly);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="comment">// Read the data</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <a class="code" href="classSPI.html#ac0f9081b47949595eec8fee5365b5d7f">read</a>(rec, size, dly);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;}</div><div class="ttc" id="classSPI_html_af05eaef265f31ddf0fddf5189112fa16a7b1f36343242c16f11c88f9343b3f594"><div class="ttname"><a href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16a7b1f36343242c16f11c88f9343b3f594">SPI::SPI_MASTER</a></div><div class="ttdoc">SPI master mode. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00265">spi.h:265</a></div></div>
<div class="ttc" id="classSPI_html_a1ad111bb98a9e3c6190eb550a9318e68"><div class="ttname"><a href="classSPI.html#a1ad111bb98a9e3c6190eb550a9318e68">SPI::_mode</a></div><div class="ttdeci">volatile spi_mode_t _mode</div><div class="ttdoc">SPI mode. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00270">spi.h:270</a></div></div>
<div class="ttc" id="classSPI_html_a875e2d2f853e068acd1721b49a5cdd13"><div class="ttname"><a href="classSPI.html#a875e2d2f853e068acd1721b49a5cdd13">SPI::write</a></div><div class="ttdeci">void write(uint8_t src, uint16_t dly=0)</div><div class="ttdoc">write(uint8_t*, uint8_t, uint16_t) handler for 1 byte &quot;src&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8cpp_source.html#l00122">spi.cpp:122</a></div></div>
<div class="ttc" id="classSPI_html_ac0f9081b47949595eec8fee5365b5d7f"><div class="ttname"><a href="classSPI.html#ac0f9081b47949595eec8fee5365b5d7f">SPI::read</a></div><div class="ttdeci">void read(uint8_t *rec, size_t size, uint16_t dly=0)</div><div class="ttdoc">Read &quot;size&quot; bytes from the slave to &quot;rec&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8cpp_source.html#l00162">spi.cpp:162</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa8ffe985040078a4f67e8cebafa67744"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8ffe985040078a4f67e8cebafa67744">&#9670;&nbsp;</a></span>enable() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SPI::enable </td>
          <td>(</td>
          <td class="paramtype">pins_t&#160;</td>
          <td class="paramname"><em>ss_int</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_8h.html#a4ae663b5bf737f82fa2c1d5d2a359a8b">fun_ptr_vd_vd</a>&#160;</td>
          <td class="paramname"><em>fun</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prepare the MOSI, MISO, SCLK and SS pins for slave operation and start the slave routine. The SS pin of the board has to be connected to a pin with external or pin-change interrupt capabilities (used to control the <a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> flow). It's possible to set a user-defined function that executes before the slave interruption is handled (if required). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ss_int</td><td>Board pin value, interrupt compatible. </td></tr>
    <tr><td class="paramname">fun</td><td>ISR callback. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return if it was possible to set the <a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> as slave. If it was a success returns true, else returns false. </dd></dl>

<p class="definition">Definition at line <a class="el" href="spi_8cpp_source.html#l00255">255</a> of file <a class="el" href="spi_8cpp_source.html">spi.cpp</a>.</p>

<p class="reference">References <a class="el" href="base_8h_source.html#l00022">_BV</a>, <a class="el" href="spi_8h_source.html#l00270">_mode</a>, <a class="el" href="spi_8h_source.html#l00271">_ss_pin</a>, <a class="el" href="spi_8h_source.html#l00274">_user_on_request</a>, <a class="el" href="atomic_8h_source.html#l00019">ATOMIC</a>, <a class="el" href="int__defs_8h_source.html#l00019">CHANGE</a>, <a class="el" href="callbacks_8cpp_source.html#l00008">fun_vd_vd_dummy()</a>, <a class="el" href="gpio_8h_source.html#l00060">INPUT</a>, <a class="el" href="gpio_8h_source.html#l00062">INPUT_PULLUP</a>, <a class="el" href="int__ext_8cpp_source.html#l00045">int_ext_attach()</a>, <a class="el" href="int__pc_8cpp_source.html#l00080">int_pc_attach()</a>, <a class="el" href="spi_8cpp_source.html#l00317">on_request_callback()</a>, <a class="el" href="gpio_8h_source.html#l00061">OUTPUT</a>, <a class="el" href="gpio_8h_source.html#l00091">pin_mode()</a>, and <a class="el" href="spi_8h_source.html#l00266">SPI_SLAVE</a>.</p>
<div class="fragment"><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                                                 {</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordtype">bool</span> status;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="comment">// Set user-defined callbacks.</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="classSPI.html#a4891269624036ec8bdf7c28cc25246b7">_user_on_request</a> = (fun)? fun : <a class="code" href="base_8h.html#a2ba2f8e171d4e71827844d9537cf7fa6">fun_vd_vd_dummy</a>;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="comment">// Set pin interrupt: try first with external, if not, with pin-change</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <a class="code" href="gpio_8h.html#a3d3d10f2a2e5b693dd48f8f626c6e3a5">pin_mode</a>(ss_int, <a class="code" href="gpio_8h.html#a491a2cbfb4e94f2afcc0d5bdef2dc454a851c2ac60276ada62e8d9ba216c7a487">INPUT_PULLUP</a>);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    status = <a class="code" href="int__ext_8cpp.html#a95fc6831944407306b5208e66472d7e8">int_ext_attach</a>(ss_int, <a class="code" href="classSPI.html#aeb642081c8fb09b6bfe4ffff3fcb53f5">on_request_callback</a>, <a class="code" href="int__defs_8h.html#a8c5d45f0ae61660e0c81111397dbbae6aada6cf2b086af8fd5f84e946d2bd145d">CHANGE</a>);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    status = (!status)? <a class="code" href="int__pc_8cpp.html#a9d46415278c426dda81a634245a2c05f">int_pc_attach</a>(ss_int, <a class="code" href="classSPI.html#aeb642081c8fb09b6bfe4ffff3fcb53f5">on_request_callback</a>, <a class="code" href="int__defs_8h.html#a8c5d45f0ae61660e0c81111397dbbae6aada6cf2b086af8fd5f84e946d2bd145d">CHANGE</a>) : status;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">if</span> (status) {</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="comment">// Save pin</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <a class="code" href="classSPI.html#a56eed322c603b399c2781efc7b639166">_ss_pin</a> = ss_int;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="comment">// Set SPI mode</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <a class="code" href="classSPI.html#a1ad111bb98a9e3c6190eb550a9318e68">_mode</a> = <a class="code" href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16ad3b5a1dde16148dc9bd5337dd96cbe7a">SPI_SLAVE</a>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="comment">// Set SS as slave</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <a class="code" href="gpio_8h.html#a3d3d10f2a2e5b693dd48f8f626c6e3a5">pin_mode</a>(SS,   <a class="code" href="gpio_8h.html#a491a2cbfb4e94f2afcc0d5bdef2dc454a851c2ac60276ada62e8d9ba216c7a487">INPUT_PULLUP</a>);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="comment">// Set SCK, MOSI and MISO</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <a class="code" href="gpio_8h.html#a3d3d10f2a2e5b693dd48f8f626c6e3a5">pin_mode</a>(SCK,  <a class="code" href="gpio_8h.html#a491a2cbfb4e94f2afcc0d5bdef2dc454ae310c909d76b003d016bef8bdf16936a">INPUT</a>);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <a class="code" href="gpio_8h.html#a3d3d10f2a2e5b693dd48f8f626c6e3a5">pin_mode</a>(MOSI, <a class="code" href="gpio_8h.html#a491a2cbfb4e94f2afcc0d5bdef2dc454ae310c909d76b003d016bef8bdf16936a">INPUT</a>);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <a class="code" href="gpio_8h.html#a3d3d10f2a2e5b693dd48f8f626c6e3a5">pin_mode</a>(MISO, <a class="code" href="gpio_8h.html#a491a2cbfb4e94f2afcc0d5bdef2dc454a2ab08d3e103968f5f4f26b66a52e99d6">OUTPUT</a>);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="comment">// Enable interrupts</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <a class="code" href="atomic_8h.html#a1222129ee14a35c47bfe00baf377d8aa">ATOMIC</a>({</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            SPCR |= (<a class="code" href="base_8h.html#a483c9de27db573099572f5485ef841c9">_BV</a>(SPE) | <a class="code" href="base_8h.html#a483c9de27db573099572f5485ef841c9">_BV</a>(SPIE));</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        });</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    }</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">return</span> status;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;}</div><div class="ttc" id="int__pc_8cpp_html_a9d46415278c426dda81a634245a2c05f"><div class="ttname"><a href="int__pc_8cpp.html#a9d46415278c426dda81a634245a2c05f">int_pc_attach</a></div><div class="ttdeci">bool int_pc_attach(pins_t pin, fun_ptr_vd_vd function, int_mode_t mode)</div><div class="ttdoc">Enable a pin change interrupt and attach its ISR callback function. </div><div class="ttdef"><b>Definition:</b> <a href="int__pc_8cpp_source.html#l00080">int_pc.cpp:80</a></div></div>
<div class="ttc" id="int__ext_8cpp_html_a95fc6831944407306b5208e66472d7e8"><div class="ttname"><a href="int__ext_8cpp.html#a95fc6831944407306b5208e66472d7e8">int_ext_attach</a></div><div class="ttdeci">bool int_ext_attach(pins_t pin, fun_ptr_vd_vd function, int_mode_t mode)</div><div class="ttdoc">Enable an external interrupt pin and attach its ISR callback function. </div><div class="ttdef"><b>Definition:</b> <a href="int__ext_8cpp_source.html#l00045">int_ext.cpp:45</a></div></div>
<div class="ttc" id="base_8h_html_a2ba2f8e171d4e71827844d9537cf7fa6"><div class="ttname"><a href="base_8h.html#a2ba2f8e171d4e71827844d9537cf7fa6">fun_vd_vd_dummy</a></div><div class="ttdeci">void fun_vd_vd_dummy(void)</div><div class="ttdoc">Dummy function, does nothing. Used to initialize fun_ptr_vd_vd pointers. </div><div class="ttdef"><b>Definition:</b> <a href="callbacks_8cpp_source.html#l00008">callbacks.cpp:8</a></div></div>
<div class="ttc" id="gpio_8h_html_a3d3d10f2a2e5b693dd48f8f626c6e3a5"><div class="ttname"><a href="gpio_8h.html#a3d3d10f2a2e5b693dd48f8f626c6e3a5">pin_mode</a></div><div class="ttdeci">void pin_mode(pins_t pin, gpio_mode_t mode)</div><div class="ttdoc">Initialize a pin with a certain mode (INPUT, INPUT_PULLUP, OUTPUT). </div><div class="ttdef"><b>Definition:</b> <a href="gpio_8h_source.html#l00091">gpio.h:91</a></div></div>
<div class="ttc" id="classSPI_html_af05eaef265f31ddf0fddf5189112fa16ad3b5a1dde16148dc9bd5337dd96cbe7a"><div class="ttname"><a href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16ad3b5a1dde16148dc9bd5337dd96cbe7a">SPI::SPI_SLAVE</a></div><div class="ttdoc">SPI slave mode. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00266">spi.h:266</a></div></div>
<div class="ttc" id="gpio_8h_html_a491a2cbfb4e94f2afcc0d5bdef2dc454a851c2ac60276ada62e8d9ba216c7a487"><div class="ttname"><a href="gpio_8h.html#a491a2cbfb4e94f2afcc0d5bdef2dc454a851c2ac60276ada62e8d9ba216c7a487">INPUT_PULLUP</a></div><div class="ttdoc">Pin configured as input with pullup (DDR(0), PORT(1)) </div><div class="ttdef"><b>Definition:</b> <a href="gpio_8h_source.html#l00062">gpio.h:62</a></div></div>
<div class="ttc" id="base_8h_html_a483c9de27db573099572f5485ef841c9"><div class="ttname"><a href="base_8h.html#a483c9de27db573099572f5485ef841c9">_BV</a></div><div class="ttdeci">#define _BV(x)</div><div class="ttdef"><b>Definition:</b> <a href="base_8h_source.html#l00022">base.h:22</a></div></div>
<div class="ttc" id="classSPI_html_aeb642081c8fb09b6bfe4ffff3fcb53f5"><div class="ttname"><a href="classSPI.html#aeb642081c8fb09b6bfe4ffff3fcb53f5">SPI::on_request_callback</a></div><div class="ttdeci">static void on_request_callback(void)</div><div class="ttdoc">Internal slave on request ISR callback. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8cpp_source.html#l00317">spi.cpp:317</a></div></div>
<div class="ttc" id="classSPI_html_a56eed322c603b399c2781efc7b639166"><div class="ttname"><a href="classSPI.html#a56eed322c603b399c2781efc7b639166">SPI::_ss_pin</a></div><div class="ttdeci">static pins_t _ss_pin</div><div class="ttdoc">Slave SS interrupt pin. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00271">spi.h:271</a></div></div>
<div class="ttc" id="classSPI_html_a1ad111bb98a9e3c6190eb550a9318e68"><div class="ttname"><a href="classSPI.html#a1ad111bb98a9e3c6190eb550a9318e68">SPI::_mode</a></div><div class="ttdeci">volatile spi_mode_t _mode</div><div class="ttdoc">SPI mode. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00270">spi.h:270</a></div></div>
<div class="ttc" id="classSPI_html_a4891269624036ec8bdf7c28cc25246b7"><div class="ttname"><a href="classSPI.html#a4891269624036ec8bdf7c28cc25246b7">SPI::_user_on_request</a></div><div class="ttdeci">static fun_ptr_vd_vd _user_on_request</div><div class="ttdoc">Slave on request ISR callback. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00274">spi.h:274</a></div></div>
<div class="ttc" id="int__defs_8h_html_a8c5d45f0ae61660e0c81111397dbbae6aada6cf2b086af8fd5f84e946d2bd145d"><div class="ttname"><a href="int__defs_8h.html#a8c5d45f0ae61660e0c81111397dbbae6aada6cf2b086af8fd5f84e946d2bd145d">CHANGE</a></div><div class="ttdoc">The interrupt is activated when the pin change it state. </div><div class="ttdef"><b>Definition:</b> <a href="int__defs_8h_source.html#l00019">int_defs.h:19</a></div></div>
<div class="ttc" id="gpio_8h_html_a491a2cbfb4e94f2afcc0d5bdef2dc454a2ab08d3e103968f5f4f26b66a52e99d6"><div class="ttname"><a href="gpio_8h.html#a491a2cbfb4e94f2afcc0d5bdef2dc454a2ab08d3e103968f5f4f26b66a52e99d6">OUTPUT</a></div><div class="ttdoc">Pin configured as output (DDR(1)) </div><div class="ttdef"><b>Definition:</b> <a href="gpio_8h_source.html#l00061">gpio.h:61</a></div></div>
<div class="ttc" id="gpio_8h_html_a491a2cbfb4e94f2afcc0d5bdef2dc454ae310c909d76b003d016bef8bdf16936a"><div class="ttname"><a href="gpio_8h.html#a491a2cbfb4e94f2afcc0d5bdef2dc454ae310c909d76b003d016bef8bdf16936a">INPUT</a></div><div class="ttdoc">Pin configured as input (DDR(0)) </div><div class="ttdef"><b>Definition:</b> <a href="gpio_8h_source.html#l00060">gpio.h:60</a></div></div>
<div class="ttc" id="atomic_8h_html_a1222129ee14a35c47bfe00baf377d8aa"><div class="ttname"><a href="atomic_8h.html#a1222129ee14a35c47bfe00baf377d8aa">ATOMIC</a></div><div class="ttdeci">#define ATOMIC(code)</div><div class="ttdef"><b>Definition:</b> <a href="atomic_8h_source.html#l00019">atomic.h:19</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a20e3f8b9050dfb22733fd18a7625f6b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20e3f8b9050dfb22733fd18a7625f6b6">&#9670;&nbsp;</a></span>on_receive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SPI::on_receive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_8h.html#a725043bfa4ceb912d193c003ceffb1b6">fun_ptr_u8_u8</a>&#160;</td>
          <td class="paramname"><em>fun</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a user-defined function to handle the data received from the master. The input of the function is the byte received and the output is the response generated. By default the slave will send 0x00 for every byte received. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fun</td><td>ISR callback. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="spi_8cpp_source.html#l00282">282</a> of file <a class="el" href="spi_8cpp_source.html">spi.cpp</a>.</p>

<p class="reference">References <a class="el" href="spi_8h_source.html#l00273">_user_on_receive</a>, and <a class="el" href="callbacks_8cpp_source.html#l00016">fun_u8_u8_dummy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                                      {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <a class="code" href="classSPI.html#a9e448dfcc7ab4bc71100081fbfaf0f69">_user_on_receive</a> = (fun)? fun : <a class="code" href="base_8h.html#a0eecf71a28a1694c948cce671c54d018">fun_u8_u8_dummy</a>;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;}</div><div class="ttc" id="classSPI_html_a9e448dfcc7ab4bc71100081fbfaf0f69"><div class="ttname"><a href="classSPI.html#a9e448dfcc7ab4bc71100081fbfaf0f69">SPI::_user_on_receive</a></div><div class="ttdeci">static fun_ptr_u8_u8 _user_on_receive</div><div class="ttdoc">Slave on receive ISR callback. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00273">spi.h:273</a></div></div>
<div class="ttc" id="base_8h_html_a0eecf71a28a1694c948cce671c54d018"><div class="ttname"><a href="base_8h.html#a0eecf71a28a1694c948cce671c54d018">fun_u8_u8_dummy</a></div><div class="ttdeci">uint8_t fun_u8_u8_dummy(uint8_t value)</div><div class="ttdoc">Dummy function, does nothing. Used to initialize fun_ptr_u8_u8 pointers. </div><div class="ttdef"><b>Definition:</b> <a href="callbacks_8cpp_source.html#l00016">callbacks.cpp:16</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1596e3384f6094e9f469e792f8609cc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1596e3384f6094e9f469e792f8609cc7">&#9670;&nbsp;</a></span>get_prescaler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t SPI::get_prescaler </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>freq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculate the most adequate prescaler depending on the selected frequency. </p>
<dl class="section return"><dt>Returns</dt><dd>Prescaler value. </dd></dl>

<p class="definition">Definition at line <a class="el" href="spi_8cpp_source.html#l00299">299</a> of file <a class="el" href="spi_8cpp_source.html">spi.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="spi_8cpp_source.html#l00065">get_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                                        {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    uint32_t scale = F_CPU / freq;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">if</span> (scale &lt;= 2)  <span class="keywordflow">return</span> 0x04;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">if</span> (scale &lt;= 4)  <span class="keywordflow">return</span> 0x00;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordflow">if</span> (scale &lt;= 8)  <span class="keywordflow">return</span> 0x05;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">if</span> (scale &lt;= 16) <span class="keywordflow">return</span> 0x01;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">if</span> (scale &lt;= 32) <span class="keywordflow">return</span> 0x06;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">if</span> (scale &lt;= 64) <span class="keywordflow">return</span> 0x07;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordflow">return</span> 0x03;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a48cc6825318bed86872e3deb56777f65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48cc6825318bed86872e3deb56777f65">&#9670;&nbsp;</a></span>on_receive_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t SPI::on_receive_callback </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>m_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Internal slave on receive ISR callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m_data</td><td>Byte received from the master. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="spi_8cpp_source.html#l00311">311</a> of file <a class="el" href="spi_8cpp_source.html">spi.cpp</a>.</p>

<p class="reference">References <a class="el" href="spi_8h_source.html#l00272">_slave_active</a>, and <a class="el" href="spi_8h_source.html#l00273">_user_on_receive</a>.</p>

<p class="reference">Referenced by <a class="el" href="spi_8cpp_source.html#l00330">ISR()</a>.</p>
<div class="fragment"><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                                               {</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classSPI.html#a6f93dbfa5da95cea67f1c447fa65a5ed">_slave_active</a>)</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <span class="keywordflow">return</span> 0x00;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classSPI.html#a9e448dfcc7ab4bc71100081fbfaf0f69">_user_on_receive</a>(m_data);</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;}</div><div class="ttc" id="classSPI_html_a9e448dfcc7ab4bc71100081fbfaf0f69"><div class="ttname"><a href="classSPI.html#a9e448dfcc7ab4bc71100081fbfaf0f69">SPI::_user_on_receive</a></div><div class="ttdeci">static fun_ptr_u8_u8 _user_on_receive</div><div class="ttdoc">Slave on receive ISR callback. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00273">spi.h:273</a></div></div>
<div class="ttc" id="classSPI_html_a6f93dbfa5da95cea67f1c447fa65a5ed"><div class="ttname"><a href="classSPI.html#a6f93dbfa5da95cea67f1c447fa65a5ed">SPI::_slave_active</a></div><div class="ttdeci">static bool _slave_active</div><div class="ttdoc">Slave on-request flag. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00272">spi.h:272</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeb642081c8fb09b6bfe4ffff3fcb53f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb642081c8fb09b6bfe4ffff3fcb53f5">&#9670;&nbsp;</a></span>on_request_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SPI::on_request_callback </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Internal slave on request ISR callback. </p>

<p class="definition">Definition at line <a class="el" href="spi_8cpp_source.html#l00317">317</a> of file <a class="el" href="spi_8cpp_source.html">spi.cpp</a>.</p>

<p class="reference">References <a class="el" href="spi_8h_source.html#l00272">_slave_active</a>, <a class="el" href="spi_8h_source.html#l00271">_ss_pin</a>, <a class="el" href="spi_8h_source.html#l00274">_user_on_request</a>, and <a class="el" href="gpio_8h_source.html#l00140">pin_read()</a>.</p>

<p class="reference">Referenced by <a class="el" href="spi_8cpp_source.html#l00255">enable()</a>.</p>
<div class="fragment"><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                                  {</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="gpio_8h.html#ab456f87195edc49bd7d4914c0fff937a">pin_read</a>(<a class="code" href="classSPI.html#a56eed322c603b399c2781efc7b639166">_ss_pin</a>)) {</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <a class="code" href="classSPI.html#a6f93dbfa5da95cea67f1c447fa65a5ed">_slave_active</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <a class="code" href="classSPI.html#a6f93dbfa5da95cea67f1c447fa65a5ed">_slave_active</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <a class="code" href="classSPI.html#a4891269624036ec8bdf7c28cc25246b7">_user_on_request</a>();</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    }</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;}</div><div class="ttc" id="classSPI_html_a56eed322c603b399c2781efc7b639166"><div class="ttname"><a href="classSPI.html#a56eed322c603b399c2781efc7b639166">SPI::_ss_pin</a></div><div class="ttdeci">static pins_t _ss_pin</div><div class="ttdoc">Slave SS interrupt pin. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00271">spi.h:271</a></div></div>
<div class="ttc" id="classSPI_html_a4891269624036ec8bdf7c28cc25246b7"><div class="ttname"><a href="classSPI.html#a4891269624036ec8bdf7c28cc25246b7">SPI::_user_on_request</a></div><div class="ttdeci">static fun_ptr_vd_vd _user_on_request</div><div class="ttdoc">Slave on request ISR callback. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00274">spi.h:274</a></div></div>
<div class="ttc" id="gpio_8h_html_ab456f87195edc49bd7d4914c0fff937a"><div class="ttname"><a href="gpio_8h.html#ab456f87195edc49bd7d4914c0fff937a">pin_read</a></div><div class="ttdeci">bool pin_read(pins_t pin)</div><div class="ttdoc">Return the pin value. </div><div class="ttdef"><b>Definition:</b> <a href="gpio_8h_source.html#l00140">gpio.h:140</a></div></div>
<div class="ttc" id="classSPI_html_a6f93dbfa5da95cea67f1c447fa65a5ed"><div class="ttname"><a href="classSPI.html#a6f93dbfa5da95cea67f1c447fa65a5ed">SPI::_slave_active</a></div><div class="ttdeci">static bool _slave_active</div><div class="ttdoc">Slave on-request flag. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00272">spi.h:272</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="a96543550133e0b0c6ae83faad5c0d68d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96543550133e0b0c6ae83faad5c0d68d">&#9670;&nbsp;</a></span>SPI_STC_vect</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SPI_STC_vect </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Used to make available private <a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> methods on the ISR. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aa71ccc78ec61fa8aa8312d3ad01263b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa71ccc78ec61fa8aa8312d3ad01263b9">&#9670;&nbsp;</a></span>_inst</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSPI.html">SPI</a> * SPI::_inst = NULL</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classSPI_1_1Device.html" title="SPI device class. Use this class to simplify the SPI device creation and configuration. ">Device</a> Singleton. </p>
<p><a class="el" href="classSPI_1_1Device.html" title="SPI device class. Use this class to simplify the SPI device creation and configuration. ">Device</a> singleton initialization. </p>

<p class="definition">Definition at line <a class="el" href="spi_8h_source.html#l00255">255</a> of file <a class="el" href="spi_8h_source.html">spi.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="spi_8cpp_source.html#l00022">delete_instance()</a>, and <a class="el" href="spi_8cpp_source.html#l00017">get_instance()</a>.</p>

</div>
</div>
<a id="a1ad111bb98a9e3c6190eb550a9318e68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ad111bb98a9e3c6190eb550a9318e68">&#9670;&nbsp;</a></span>_mode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">volatile <a class="el" href="classSPI.html#af05eaef265f31ddf0fddf5189112fa16">spi_mode_t</a> SPI::_mode</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classSPI.html" title="SPI bus general implementation. ">SPI</a> mode. </p>

<p class="definition">Definition at line <a class="el" href="spi_8h_source.html#l00270">270</a> of file <a class="el" href="spi_8h_source.html">spi.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="spi_8cpp_source.html#l00038">enable()</a>, <a class="el" href="spi_8cpp_source.html#l00162">read()</a>, <a class="el" href="spi_8cpp_source.html#l00180">read_reg()</a>, <a class="el" href="spi_8cpp_source.html#l00050">start()</a>, <a class="el" href="spi_8cpp_source.html#l00081">transfer()</a>, <a class="el" href="spi_8cpp_source.html#l00126">write()</a>, and <a class="el" href="spi_8cpp_source.html#l00144">write_reg()</a>.</p>

</div>
</div>
<a id="a56eed322c603b399c2781efc7b639166"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56eed322c603b399c2781efc7b639166">&#9670;&nbsp;</a></span>_ss_pin</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pins_t SPI::_ss_pin</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Slave SS interrupt pin. </p>

<p class="definition">Definition at line <a class="el" href="spi_8h_source.html#l00271">271</a> of file <a class="el" href="spi_8h_source.html">spi.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="spi_8cpp_source.html#l00255">enable()</a>, <a class="el" href="spi_8cpp_source.html#l00317">on_request_callback()</a>, and <a class="el" href="spi_8cpp_source.html#l00287">SPI()</a>.</p>

</div>
</div>
<a id="a6f93dbfa5da95cea67f1c447fa65a5ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f93dbfa5da95cea67f1c447fa65a5ed">&#9670;&nbsp;</a></span>_slave_active</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SPI::_slave_active</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Slave on-request flag. </p>

<p class="definition">Definition at line <a class="el" href="spi_8h_source.html#l00272">272</a> of file <a class="el" href="spi_8h_source.html">spi.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="spi_8cpp_source.html#l00311">on_receive_callback()</a>, <a class="el" href="spi_8cpp_source.html#l00317">on_request_callback()</a>, and <a class="el" href="spi_8cpp_source.html#l00287">SPI()</a>.</p>

</div>
</div>
<a id="a9e448dfcc7ab4bc71100081fbfaf0f69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e448dfcc7ab4bc71100081fbfaf0f69">&#9670;&nbsp;</a></span>_user_on_receive</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_8h.html#a725043bfa4ceb912d193c003ceffb1b6">fun_ptr_u8_u8</a> SPI::_user_on_receive</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Slave on receive ISR callback. </p>

<p class="definition">Definition at line <a class="el" href="spi_8h_source.html#l00273">273</a> of file <a class="el" href="spi_8h_source.html">spi.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="spi_8cpp_source.html#l00282">on_receive()</a>, <a class="el" href="spi_8cpp_source.html#l00311">on_receive_callback()</a>, and <a class="el" href="spi_8cpp_source.html#l00287">SPI()</a>.</p>

</div>
</div>
<a id="a4891269624036ec8bdf7c28cc25246b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4891269624036ec8bdf7c28cc25246b7">&#9670;&nbsp;</a></span>_user_on_request</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_8h.html#a4ae663b5bf737f82fa2c1d5d2a359a8b">fun_ptr_vd_vd</a> SPI::_user_on_request</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Slave on request ISR callback. </p>

<p class="definition">Definition at line <a class="el" href="spi_8h_source.html#l00274">274</a> of file <a class="el" href="spi_8h_source.html">spi.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="spi_8cpp_source.html#l00255">enable()</a>, <a class="el" href="spi_8cpp_source.html#l00317">on_request_callback()</a>, and <a class="el" href="spi_8cpp_source.html#l00287">SPI()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>hardware/<a class="el" href="spi_8h_source.html">spi.h</a></li>
<li>hardware/<a class="el" href="spi_8cpp_source.html">spi.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classSPI.html">SPI</a></li>
    <li class="footer">Generated on Tue Jul 9 2019 18:48:55 for AVRLibs by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
